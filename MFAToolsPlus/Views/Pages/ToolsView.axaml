<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:suki="https://github.com/kikipoulet/SukiUI"
             xmlns:markup="https://codewf.com"
             x:DataType="pages:ToolsViewModel"
             xmlns:helper="clr-namespace:MFAToolsPlus.Helper"
             xmlns:ex="clr-namespace:MFAToolsPlus.Extensions"
             xmlns:calcBinding="clr-namespace:CalcBinding;assembly=CalcBindingAva"
             xmlns:pages="clr-namespace:MFAToolsPlus.ViewModels.Pages"
             xmlns:maa="clr-namespace:MFAToolsPlus.Extensions.MaaFW"
             xmlns:avalonia="clr-namespace:FluentIcons.Avalonia;assembly=FluentIcons.Avalonia"
             xmlns:binding="clr-namespace:MaaFramework.Binding;assembly=MaaFramework.Binding"
             xmlns:converters="clr-namespace:MFAToolsPlus.Helper.Converters"
             xmlns:other="clr-namespace:MFAToolsPlus.Helper.Other"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="MFAToolsPlus.Views.Pages.ToolsView"
             KeyDown="OnKeyCaptureKeyDown"
             Focusable="True">
    <Design.DataContext>
        <pages:ToolsViewModel />
    </Design.DataContext>
    <UserControl.Styles>
        <!-- BasicTight 悬停放大与前景变浅 -->
        <Style Selector="Button.ActionButton">
            <Setter Property="RenderTransformOrigin" Value="50%,50%" />
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <ScaleTransform ScaleX="1" ScaleY="1" />
                </Setter.Value>
            </Setter>
        </Style>

        <Style Selector="Button.ActionButton:pointerover">
            <Setter Property="RenderTransform">
                <ScaleTransform ScaleX="1.2" ScaleY="1.2" />
            </Setter>
            <Setter Property="Foreground" Value="{DynamicResource SukiPrimaryColor75}" />
        </Style>
        <!-- TaskToggle 外层悬停放大 -->
        <Style Selector="Border#TaskToggleBorder">
            <Setter Property="RenderTransformOrigin" Value="50%,50%" />
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <ScaleTransform ScaleX="1" ScaleY="1" />
                </Setter.Value>
            </Setter>
        </Style>
        <Style Selector="Border#TaskToggleBorder:pointerover">
            <Setter Property="RenderTransform">
                <ScaleTransform ScaleX="1.12" ScaleY="1.12" />
            </Setter>
            <Setter Property="Background" Value="{DynamicResource SukiPrimaryColor75}" />
        </Style>

        <!-- 单层流光动画 -->
        <Style Selector="Border#TaskToggleShineLayer">
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <TranslateTransform X="-160" />
                </Setter.Value>
            </Setter>
            <Style.Animations>
                <Animation Duration="0:0:1.8" IterationCount="INFINITE">
                    <KeyFrame Cue="0%">
                        <Setter Property="TranslateTransform.X" Value="-160" />
                    </KeyFrame>
                    <KeyFrame Cue="100%">
                        <Setter Property="TranslateTransform.X" Value="160" />
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>

        <Style Selector="Button.SyncButton Path">
            <Setter Property="RenderTransformOrigin" Value="50%,50%" />
            <Setter Property="Margin" Value="1" />
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <TransformGroup>
                        <ScaleTransform ScaleX="1" ScaleY="1" />
                        <RotateTransform Angle="0" />
                    </TransformGroup>
                </Setter.Value>
            </Setter>
        </Style>

        <Style Selector="Button.SyncButton:pointerover Path">
            <Style.Animations>
                <Animation Duration="0:0:0.15" FillMode="Forward">
                    <KeyFrame Cue="100%">
                        <Setter Property="ScaleTransform.ScaleX" Value="1.1" />
                        <Setter Property="ScaleTransform.ScaleY" Value="1.1" />
                        <Setter Property="RotateTransform.Angle" Value="-15" />
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>
        <Style Selector="Button.SyncButton:not(:pointerover) Path">
            <Style.Animations>
                <Animation Duration="0:0:0.15" FillMode="Forward">
                    <KeyFrame Cue="100%">
                        <Setter Property="ScaleTransform.ScaleX" Value="1" />
                        <Setter Property="ScaleTransform.ScaleY" Value="1" />
                        <Setter Property="RotateTransform.Angle" Value="0" />
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>
        <Style Selector="Button.SyncButton:pressed Path">
            <Style.Animations>
                <Animation Duration="0:0:0.6" FillMode="Forward">
                    <KeyFrame Cue="0%">
                        <Setter Property="RotateTransform.Angle" Value="0" />
                    </KeyFrame>
                    <KeyFrame Cue="100%">
                        <Setter Property="RotateTransform.Angle" Value="360" />
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>


        <!-- 中心绿点脉冲动画 -->
        <Style Selector="Ellipse#LiveStatusDot">
            <Style.Animations>
                <Animation Duration="0:0:1.5" IterationCount="INFINITE" Easing="CubicEaseInOut">
                    <KeyFrame Cue="0%">
                        <Setter Property="ScaleTransform.ScaleX" Value="1" />
                        <Setter Property="ScaleTransform.ScaleY" Value="1" />
                        <Setter Property="Opacity" Value="1" />
                    </KeyFrame>
                    <KeyFrame Cue="50%">
                        <Setter Property="ScaleTransform.ScaleX" Value="1.2" />
                        <Setter Property="ScaleTransform.ScaleY" Value="1.2" />
                        <Setter Property="Opacity" Value="0.8" />
                    </KeyFrame>
                    <KeyFrame Cue="100%">
                        <Setter Property="ScaleTransform.ScaleX" Value="1" />
                        <Setter Property="ScaleTransform.ScaleY" Value="1" />
                        <Setter Property="Opacity" Value="1" />
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>

        <!-- 外圈扩散动画 1 -->
        <Style Selector="Ellipse#PulseRing1">
            <Style.Animations>
                <Animation Duration="0:0:1.5" IterationCount="INFINITE" Easing="CubicEaseOut">
                    <KeyFrame Cue="0%">
                        <Setter Property="ScaleTransform.ScaleX" Value="1" />
                        <Setter Property="ScaleTransform.ScaleY" Value="1" />
                        <Setter Property="Opacity" Value="0.6" />
                        <Setter Property="StrokeThickness" Value="2" />
                    </KeyFrame>
                    <KeyFrame Cue="100%">
                        <Setter Property="ScaleTransform.ScaleX" Value="2.5" />
                        <Setter Property="ScaleTransform.ScaleY" Value="2.5" />
                        <Setter Property="Opacity" Value="0" />
                        <Setter Property="StrokeThickness" Value="0.5" />
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>

        <!-- 外圈扩散动画 2 (延迟 0.75s) -->
        <Style Selector="Ellipse#PulseRing2">
            <Style.Animations>
                <Animation Duration="0:0:1.5" IterationCount="INFINITE" Easing="CubicEaseOut" Delay="0:0:0.75">
                    <KeyFrame Cue="0%">
                        <Setter Property="ScaleTransform.ScaleX" Value="1" />
                        <Setter Property="ScaleTransform.ScaleY" Value="1" />
                        <Setter Property="Opacity" Value="0.6" />
                        <Setter Property="StrokeThickness" Value="2" />
                    </KeyFrame>
                    <KeyFrame Cue="100%">
                        <Setter Property="ScaleTransform.ScaleX" Value="2.5" />
                        <Setter Property="ScaleTransform.ScaleY" Value="2.5" />
                        <Setter Property="Opacity" Value="0" />
                        <Setter Property="StrokeThickness" Value="0.5" />
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>


        <!-- TaskToggle 外层悬停放大 -->
        <Style Selector="Border#TaskToggleBorder">
            <Setter Property="RenderTransformOrigin" Value="50%,50%" />
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <ScaleTransform ScaleX="1" ScaleY="1" />
                </Setter.Value>
            </Setter>
        </Style>
        <Style Selector="Border#TaskToggleBorder:pointerover">
            <Setter Property="RenderTransform">
                <ScaleTransform ScaleX="1.12" ScaleY="1.12" />
            </Setter>
            <Setter Property="Background" Value="{DynamicResource SukiPrimaryColor75}" />
        </Style>

        <!-- 单层流光动画 -->
        <Style Selector="Border#TaskToggleShineLayer">
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <TranslateTransform X="-160" />
                </Setter.Value>
            </Setter>
            <Style.Animations>
                <Animation Duration="0:0:1.8" IterationCount="INFINITE">
                    <KeyFrame Cue="0%">
                        <Setter Property="TranslateTransform.X" Value="-160" />
                    </KeyFrame>
                    <KeyFrame Cue="100%">
                        <Setter Property="TranslateTransform.X" Value="160" />
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>

        <!-- BasicTight 悬停放大与前景变浅 -->
        <Style Selector="Button.TaskQueueBasicTight">
            <Setter Property="RenderTransformOrigin" Value="50%,50%" />
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <ScaleTransform ScaleX="1" ScaleY="1" />
                </Setter.Value>
            </Setter>
        </Style>

        <Style Selector="Button.TaskQueueBasicTight:pointerover">
            <Setter Property="RenderTransform">
                <ScaleTransform ScaleX="1.2" ScaleY="1.2" />
            </Setter>
            <Setter Property="Foreground" Value="{DynamicResource SukiPrimaryColor75}" />
        </Style>

        <Style Selector="Button.PlayStopButton:pointerover">
            <Style.Animations>
                <Animation Duration="0:0:0.15" FillMode="Forward">
                    <KeyFrame Cue="100%">
                        <Setter Property="ScaleTransform.ScaleX" Value="1.15" />
                        <Setter Property="ScaleTransform.ScaleY" Value="1.15" />
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>

        <Style Selector="Button.PlayStopButton:not(:pointerover)">
            <Style.Animations>
                <Animation Duration="0:0:0.15" FillMode="Forward">
                    <KeyFrame Cue="100%">
                        <Setter Property="ScaleTransform.ScaleX" Value="1" />
                        <Setter Property="ScaleTransform.ScaleY" Value="1" />
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>

        <Style Selector="Border#GradientButtonBorder:pointerover Border#ShineLayer1">
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                        <GradientStop Color="Transparent" Offset="0.0" />
                        <GradientStop Color="Transparent" Offset="0.25" />
                        <GradientStop Color="#40FFFFFF" Offset="0.45" />
                        <GradientStop Color="#70FFFFFF" Offset="0.5" />
                        <GradientStop Color="#40FFFFFF" Offset="0.55" />
                        <GradientStop Color="Transparent" Offset="0.75" />
                        <GradientStop Color="Transparent" Offset="1.0" />
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
        </Style>
        <Style Selector="Border#GradientButtonBorder:pointerover Border#ShineLayer2">
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                        <GradientStop Color="Transparent" Offset="0.0" />
                        <GradientStop Color="Transparent" Offset="0.25" />
                        <GradientStop Color="#40FFFFFF" Offset="0.45" />
                        <GradientStop Color="#70FFFFFF" Offset="0.5" />
                        <GradientStop Color="#40FFFFFF" Offset="0.55" />
                        <GradientStop Color="Transparent" Offset="0.75" />
                        <GradientStop Color="Transparent" Offset="1.0" />
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
        </Style>
        <Style Selector="Border#GradientButtonBorder:pointerover Border#ShineLayer3">
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                        <GradientStop Color="Transparent" Offset="0.0" />
                        <GradientStop Color="Transparent" Offset="0.25" />
                        <GradientStop Color="#40FFFFFF" Offset="0.45" />
                        <GradientStop Color="#70FFFFFF" Offset="0.5" />
                        <GradientStop Color="#40FFFFFF" Offset="0.55" />
                        <GradientStop Color="Transparent" Offset="0.75" />
                        <GradientStop Color="Transparent" Offset="1.0" />
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Styles>
    <Grid ClipToBounds="False" Margin="0,0,0,0" RowDefinitions="Auto,*" x:Name="MainGrid">

        <!-- 第一行：顶部工具栏（资源选择 + 连接设置） -->
        <suki:GlassCard Grid.Row="0" Margin="15,15,15,5" Padding="12,8" IsAnimated="False">
            <Grid x:Name="TopToolbar">
                <Grid x:Name="TopToolbarWide">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <!-- 控制器类型选择 -->
                    <Grid x:Name="ControllerSelectorPanel" Grid.Column="0" VerticalAlignment="Center"
                          ColumnDefinitions="Auto,*">
                        <TextBlock Grid.Column="0" FontSize="12"
                                   FontWeight="Bold" Foreground="{DynamicResource SukiLowText}"
                                   Text="{markup:I18n {x:Static helper:LangKeys.ControllerType}}"
                                   VerticalAlignment="Center" />
                        <ComboBox Margin="8 0 0 0" Grid.Column="1" x:Name="ControllerComboBox"
                                  ex:ComboBoxExtensions.DisableNavigationOnLostFocus="True"
                                  IsEnabled="{calcBinding:Binding '!LockController and Idle',Source={x:Static helper:Instances.RootViewModel}}"
                                  ItemsSource="{Binding ControllerOptions}"
                                  SelectedItem="{Binding SelectedController, Mode=TwoWay}"
                                  MinWidth="120" VerticalAlignment="Center">
                            <ComboBox.ItemTemplate>
                                <DataTemplate x:DataType="maa:MaaInterface+MaaResourceController">

                                    <TextBlock Background="Transparent" Foreground="{DynamicResource SukiText}"

                                               Text="{Binding DisplayName}"
                                               TextTrimming="CharacterEllipsis"
                                               VerticalAlignment="Center" />

                                </DataTemplate>
                            </ComboBox.ItemTemplate>
                            <ComboBox.SelectionBoxItemTemplate>
                                <DataTemplate>
                                    <TextBlock Background="Transparent" Foreground="{DynamicResource SukiText}"
                                               Text="{Binding DisplayName}"
                                               TextTrimming="CharacterEllipsis"
                                               VerticalAlignment="Center" />

                                </DataTemplate>
                            </ComboBox.SelectionBoxItemTemplate>
                        </ComboBox>
                    </Grid>
                    <!-- 右侧：连接设置 -->
                    <Grid x:Name="DeviceSelectorPanel" Grid.Column="1" HorizontalAlignment="Stretch"
                          MinWidth="200"
                          IsVisible="{calcBinding:Binding 'CurrentController != maa:MaaControllerTypes.PlayCover'}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" x:Name="DeviceSelectorLabel"
                                   FontSize="12" Margin="8 0"
                                   FontWeight="Bold" Foreground="{DynamicResource SukiLowText}"
                                   Text="{markup:I18n {x:Static helper:LangKeys.CurrentController}}"
                                   VerticalAlignment="Center" />
                        <ComboBox Grid.Column="1" x:Name="DeviceComboBox"
                                  ex:ComboBoxExtensions.DisableNavigationOnLostFocus="True"
                                  Classes="LimitWidth" Height="35"
                                  IsEnabled="{Binding Idle, Source={x:Static helper:Instances.RootViewModel}}"
                                  ItemsSource="{Binding Devices}"
                                  MinWidth="100"
                                  HorizontalAlignment="Stretch"
                                  SelectedValue="{Binding CurrentDevice, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <ToolTip.Tip>
                                <TextBlock
                                    Text="{Binding CurrentDevice, Converter={converters:DeviceDisplayConverter}}" />
                            </ToolTip.Tip>
                            <ComboBox.DataTemplates>
                                <DataTemplate DataType="binding:AdbDeviceInfo">
                                    <TextBlock HorizontalAlignment="Left"
                                               Text="{Binding Converter={converters:DeviceDisplayConverter}}" />
                                </DataTemplate>
                                <DataTemplate DataType="binding:DesktopWindowInfo">
                                    <TextBlock HorizontalAlignment="Left"
                                               Text="{Binding Name}" />
                                </DataTemplate>
                            </ComboBox.DataTemplates>
                        </ComboBox>
                    </Grid>
                    <StackPanel x:Name="ConnectionButtonsPanel" Grid.Column="2" Orientation="Horizontal"
                                VerticalAlignment="Center" Spacing="4">
                        <StackPanel.Resources>
                            <markup:IfConditionConverter x:Key="ConnectedConditionConverter">
                                <markup:IfConditionConverter.True>
                                    <Path Data="{StaticResource ConnectedGeometry}" Fill="LimeGreen"
                                          Height="11" Margin="3,2,4,0" Stretch="Uniform"
                                          ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.Connected}}" />
                                </markup:IfConditionConverter.True>
                                <markup:IfConditionConverter.False>
                                    <Path Data="{StaticResource UnconnectedGeometry}" Fill="Red"
                                          Height="16" Margin="3,3,4,0" Stretch="Uniform"
                                          ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.Unconnected}}"
                                          VerticalAlignment="Center" />
                                </markup:IfConditionConverter.False>
                            </markup:IfConditionConverter>
                        </StackPanel.Resources>
                        <Button Classes="BasicTight TaskQueueBasicTight"
                                ClipToBounds="False"
                                Command="{Binding CustomAdbCommand}"
                                IsEnabled="{Binding Idle, Source={x:Static helper:Instances.RootViewModel}}"
                                IsVisible="{calcBinding:Binding 'CurrentController == maa:MaaControllerTypes.Adb'}"
                                Padding="0" ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.Custom}}">
                            <avalonia:FluentIcon Height="18" Icon="DesktopEdit" IconSize="Size16"
                                                 IconVariant="Regular" />

                        </Button>
                        <Button Classes="BasicTight TaskQueueBasicTight"
                                Command="{Binding EditPlayCoverCommand}"
                                IsEnabled="{Binding Idle, Source={x:Static helper:Instances.RootViewModel}}"
                                IsVisible="{calcBinding:Binding 'CurrentController == maa:MaaControllerTypes.PlayCover'}"
                                Padding="0"
                                ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.EditControllerConfiguration}}">
                            <avalonia:FluentIcon Height="18" Icon="DesktopEdit" IconSize="Size16"
                                                 IconVariant="Regular" />
                        </Button>
                        <Button Classes="BasicTight TaskQueueBasicTight"
                                Command="{Binding ReconnectCommand}"
                                IsEnabled="{Binding Idle, Source={x:Static helper:Instances.RootViewModel}}"
                                Padding="0"
                                Width="24"
                                Height="24"
                                HorizontalContentAlignment="Center"
                                VerticalContentAlignment="Center"
                                ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.Reconnect}}"
                                VerticalAlignment="Center">
                            <Path Data="{StaticResource LinkGeometry}"
                                  Width="16"
                                  Height="16"
                                  Stretch="Uniform"
                                  Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                        </Button>
                        <Button Classes="BasicTight TaskQueueBasicTight SyncButton"
                                ClipToBounds="False"
                                Command="{Binding RefreshCommand}"
                                IsEnabled="{Binding Idle, Source={x:Static helper:Instances.RootViewModel}}"
                                Padding="0"
                                Width="24"
                                IsVisible="{calcBinding:Binding 'CurrentController != maa:MaaControllerTypes.PlayCover'}"
                                Height="24"
                                HorizontalContentAlignment="Center"
                                VerticalContentAlignment="Center"
                                ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.TooltipRefresh}}"
                                VerticalAlignment="Center">
                            <Path Data="{StaticResource RefreshGeometry}"
                                  Width="16"
                                  Height="16"
                                  Stretch="Uniform"
                                  Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                        </Button>
                        <ContentControl
                            Content="{Binding IsConnected, Converter={StaticResource ConnectedConditionConverter}, Source={x:Static helper:Instances.ToolsViewModel}}" />
                    </StackPanel>
                </Grid>
            </Grid>
        </suki:GlassCard>

        <Grid Grid.Row="1" Margin="15,5,15,15" ColumnDefinitions="*,Auto,Auto">
            <suki:GlassCard x:Name="LiveViewCard" IsAnimated="False" Grid.Column="0">
                <suki:GroupBox>
                    <suki:GroupBox.Header>
                        <Grid ColumnDefinitions="*,Auto" VerticalAlignment="Center">
                            <TextBlock Grid.Column="0"
                                       FontSize="11"
                                       FontWeight="Bold"
                                       Foreground="{DynamicResource SukiLowText}"
                                       Margin="2,0,0,0"
                                       Text="{markup:I18n {x:Static helper:LangKeys.LiveView}}"
                                       VerticalAlignment="Center" />
                            <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="6" VerticalAlignment="Center">
                                <RadioButton Classes="Icon"
                                             Background="Transparent"
                                             BorderThickness="0"
                                             IsChecked="{Binding IsDragMode}"
                                             ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.DragModeTooltip}}"
                                             ex:IconElement.Width="18"
                                             ex:IconElement.Height="18"
                                             ex:IconElement.Geometry="{StaticResource DragGeometry}"
                                             GroupName="LiveToolMode" />
                                <RadioButton Classes="Icon"
                                             Background="Transparent"
                                             BorderThickness="0"
                                             IsChecked="{Binding IsRoiMode}"
                                             ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.EditTaskDialog_SelectionRegion_Tooltip}}"
                                             ex:IconElement.Width="18"
                                             ex:IconElement.Height="18"
                                             ex:IconElement.Geometry="{StaticResource SelectionRegionGeometry}"
                                             GroupName="LiveToolMode" />
                                <RadioButton Classes="Icon"
                                             Background="Transparent"
                                             BorderThickness="0"
                                             IsChecked="{Binding IsColorPickMode}"
                                             ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.EditTaskDialog_ColorExtraction_Tooltip}}"
                                             ex:IconElement.Width="18"
                                             ex:IconElement.Height="18"
                                             ex:IconElement.Geometry="{StaticResource ColorExtractionGeometry}"
                                             GroupName="LiveToolMode" />
                                <RadioButton Classes="Icon"
                                             Background="Transparent"
                                             BorderThickness="0"
                                             IsChecked="{Binding IsScreenshotMode}"
                                             ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.EditTaskDialog_Screenshot_Tooltip}}"
                                             ex:IconElement.Width="18"
                                             ex:IconElement.Height="18"
                                             ex:IconElement.Geometry="{StaticResource ScreenshotsGeometry}"
                                             GroupName="LiveToolMode" />
                                <RadioButton Classes="Icon"
                                             Background="Transparent"
                                             BorderThickness="0"
                                             IsChecked="{Binding IsSwipeMode}"
                                             ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.LiveViewSwipe}}"
                                             ex:IconElement.Width="18"
                                             ex:IconElement.Height="18"
                                             ex:IconElement.Geometry="{StaticResource SwipeGeometry}"
                                             GroupName="LiveToolMode" />
                                <RadioButton Classes="Icon"
                                             Background="Transparent"
                                             BorderThickness="0"
                                             IsChecked="{Binding IsOcrMode}"
                                             ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.LiveViewOcr}}"
                                             ex:IconElement.Width="18"
                                             ex:IconElement.Height="18"
                                             ex:IconElement.Geometry="{StaticResource RecognitionTextGeometry}"
                                             GroupName="LiveToolMode" />
                                <RadioButton Classes="Icon"
                                             Background="Transparent"
                                             BorderThickness="0"
                                             IsChecked="{Binding IsNeuralNetworkDetectMode}"
                                             ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.LiveViewNeuralNetworkDetect}}"
                                             ex:IconElement.Width="18"
                                             ex:IconElement.Height="18"
                                             ex:IconElement.Geometry="{StaticResource DetectGeometry}"
                                             GroupName="LiveToolMode" />
                                <RadioButton Classes="Icon"
                                             Background="Transparent"
                                             BorderThickness="0"
                                             IsChecked="{Binding IsKeyMode}"
                                             ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.LiveViewKey}}"
                                             ex:IconElement.Width="18"
                                             ex:IconElement.Height="18"
                                             ex:IconElement.Geometry="{StaticResource KeyModeGeometry}"
                                             GroupName="LiveToolMode" />

                            </StackPanel>
                        </Grid>
                    </suki:GroupBox.Header>
                    <Grid RowDefinitions="*,Auto" ClipToBounds="False">
                        <Border x:Name="LiveViewFrame"
                                Grid.Row="0"
                                ClipToBounds="True"
                                Background="Transparent"
                                BorderBrush="{DynamicResource SukiControlBorderBrush}"
                                BorderThickness="0"
                                HorizontalAlignment="Stretch"
                                VerticalAlignment="Stretch">
                            <Border CornerRadius="0" ClipToBounds="True">
                                <suki:SukiImageViewer x:Name="LiveViewViewer"
                                                      Source="{Binding LiveViewDisplayImage}"
                                                      MinScale="0.1"
                                                      MaxScale="15"
                                                      Scale="{Binding LiveViewScale, Mode=TwoWay}"
                                                      Stretch="Uniform"
                                                      Background="Transparent"
                                                      IsDragEnabled="{Binding IsDragMode}"
                                                      ShowZoomToolbar="True"
                                                      UseCustomZoomToolbar="True"
                                                      ShowCheckerboardBackground="True"
                                                      SelectionRect="{Binding SelectionRect, Mode=TwoWay}"
                                                      HasSelection="{Binding HasSelection}"
                                                      SelectionStroke="{Binding SelectionStroke}"
                                                      SelectionFill="{Binding SelectionFill}"
                                                      SecondarySelectionRect="{Binding SecondarySelectionRect}"
                                                      HasSecondarySelection="{Binding HasSecondarySelection}"
                                                      SecondarySelectionStroke="{Binding TargetSelectionStroke}"
                                                      SecondarySelectionFill="{Binding TargetSelectionFill}"
                                                      HasSwipeArrow="{Binding HasSwipeArrow}"
                                                      SwipeArrowGeometry="{Binding SwipeArrowGeometry}"
                                                      SwipeArrowStroke="{Binding SwipeArrowStroke}"
                                                      HasBrushPreview="{Binding HasBrushPreview}"
                                                      BrushPreviewPoint="{Binding BrushPreviewPoint}"
                                                      BrushPreviewSize="{Binding BrushPreviewSize}"
                                                      BrushPreviewStroke="{Binding BrushPreviewStroke}"
                                                      BrushPreviewFill="{Binding BrushPreviewFill}"
                                                      PointerPressed="OnLiveViewPointerPressed"
                                                      PointerMoved="OnLiveViewPointerMoved"
                                                      PointerReleased="OnLiveViewPointerReleased" />
                            </Border>
                        </Border>

                        <Grid Grid.Row="1" x:Name="ControlBar" ColumnDefinitions="Auto,*,Auto" Margin="0,8,0,0"
                              VerticalAlignment="Center">

                            <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
                                <Border x:Name="TaskToggleBorder"
                                        CornerRadius="999" Height="30"
                                        ClipToBounds="True"
                                        Margin="2,0,0,0"
                                        Background="{DynamicResource SukiPrimaryColor}">
                                    <Grid>
                                        <Border x:Name="TaskToggleShineLayer"
                                                Width="{Binding Bounds.Width, ElementName=TaskToggleBorder}"
                                                CornerRadius="999"
                                                IsHitTestVisible="False"
                                                HorizontalAlignment="Left">
                                            <Border.Background>
                                                <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                                                    <GradientStop Color="Transparent" Offset="0.0" />
                                                    <GradientStop Color="Transparent" Offset="0.25" />
                                                    <GradientStop Color="#25FFFFFF" Offset="0.45" />
                                                    <GradientStop Color="#50FFFFFF" Offset="0.5" />
                                                    <GradientStop Color="#25FFFFFF" Offset="0.55" />
                                                    <GradientStop Color="Transparent" Offset="0.75" />
                                                    <GradientStop Color="Transparent" Offset="1.0" />
                                                </LinearGradientBrush>
                                            </Border.Background>
                                        </Border>
                                        <Button Classes="Flat Rounded ActionButton"
                                                Command="{Binding ToggleLiveViewPauseCommand}"
                                                Padding="0,0"
                                                CornerRadius="999"
                                                Background="Transparent"
                                                Foreground="White">
                                            <Grid Margin="12 2">
                                                <WrapPanel
                                                    IsVisible="{Binding IsLiveViewPaused}">
                                                    <Path Data="{StaticResource PlayGeometry}"
                                                          Fill="White"
                                                          Width="12"
                                                          Height="12"
                                                          Stretch="Uniform"
                                                          VerticalAlignment="Center"
                                                          HorizontalAlignment="Center" />
                                                    <TextBlock Margin="6 0 0 0" FontSize="12"
                                                               Text="{markup:I18n {x:Static helper:LangKeys.StartTask}}" />
                                                </WrapPanel>
                                                <WrapPanel
                                                    IsVisible="{Binding !IsLiveViewPaused}">
                                                    <Path Data="{StaticResource StopGeometry}"
                                                          Fill="White"
                                                          Width="12"
                                                          Height="12"
                                                          Stretch="Uniform"
                                                          VerticalAlignment="Center"
                                                          HorizontalAlignment="Center" />
                                                    <TextBlock Margin="6 0 0 0" FontSize="12"
                                                               Text="{markup:I18n {x:Static helper:LangKeys.StopTask}}" />
                                                </WrapPanel>
                                            </Grid>
                                        </Button>
                                    </Grid>
                                </Border>
                                <TextBlock VerticalAlignment="Center"
                                           Foreground="{DynamicResource SukiLowText}"
                                           IsVisible="{Binding HasBrushPreview}"
                                           Text="{Binding BrushPreviewRectText}" />
                            </StackPanel>
                            <StackPanel Grid.Column="1"
                                        Orientation="Vertical"
                                        Spacing="4"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center">
                                <StackPanel Orientation="Horizontal" Spacing="8" HorizontalAlignment="Center">
                                    <Button Classes="BasicTight ActionButton" Width="24" Height="24"
                                            Command="{Binding ZoomOutCommand, ElementName=LiveViewViewer}">
                                        <Path Data="{DynamicResource ReduceGeometry}"
                                              Width="14"
                                              Height="14"
                                              Stretch="Uniform"
                                              Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                    </Button>
                                    <TextBlock VerticalAlignment="Center"
                                               Text="{Binding LiveViewScale, StringFormat={}{0:P0}}" />
                                    <Button Classes="BasicTight ActionButton" Width="24" Height="24"
                                            Command="{Binding ZoomInCommand, ElementName=LiveViewViewer}">
                                        <Path Data="{DynamicResource EnlargeGeometry}"
                                              Width="14"
                                              Height="14"
                                              Stretch="Uniform"
                                              Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                    </Button>
                                </StackPanel>
                                <TextBlock FontSize="11"
                                           Foreground="{DynamicResource SukiLowText}"
                                           HorizontalAlignment="Center"
                                           TextWrapping="Wrap"
                                           IsVisible="{Binding IsDragMode}"
                                           Text="{markup:I18n {x:Static helper:LangKeys.LiveViewHintDragModePaused}}" />
                                <TextBlock FontSize="11"
                                           Foreground="{DynamicResource SukiLowText}"
                                           HorizontalAlignment="Center"
                                           TextWrapping="Wrap"
                                           IsVisible="{calcBinding:Binding '!IsDragMode'}"
                                           Text="{markup:I18n {x:Static helper:LangKeys.LiveViewHintCtrlModePaused}}" />
                            </StackPanel>

                            <StackPanel Grid.Column="2"
                                        Orientation="Horizontal"
                                        Spacing="6"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Center">
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.LoadImageTitle}}"
                                        Command="{Binding ImportImageCommand}">
                                    <Path Data="{StaticResource ImportImageGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <TextBlock Foreground="{DynamicResource SukiLowText}"
                                           Text="{Binding LiveViewFps, StringFormat={}{0:0} fps}" />
                            </StackPanel>
                        </Grid>
                    </Grid>
                </suki:GroupBox>
            </suki:GlassCard>

            <suki:GlassCard Grid.Column="1"
                            Margin="10,0,0,0"
                            IsAnimated="False"
                            IsVisible="{Binding IsToolPanelVisible}">
                <ScrollViewer Margin="12" VerticalScrollBarVisibility="Auto">
                    <StackPanel Spacing="10">
                        <StackPanel IsVisible="{calcBinding:Binding 'ActiveToolMode == pages:LiveViewToolMode.Roi'}"
                                    Spacing="10">
                            <StackPanel Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
                                <TextBlock VerticalAlignment="Center"
                                           FontSize="11"
                                           FontWeight="Bold"
                                           Foreground="{DynamicResource SukiLowText}"
                                           Text="{markup:I18n {x:Static helper:LangKeys.RoiModeLabel}}" />
                                <ComboBox Width="140"
                                          SelectedIndex="{Binding RoiModeIndex, Mode=TwoWay}">
                                    <ComboBoxItem Content="{markup:I18n {x:Static helper:LangKeys.RoiModeOptionRoi}}" />
                                    <ComboBoxItem
                                        Content="{markup:I18n {x:Static helper:LangKeys.RoiModeOptionTarget}}" />
                                </ComboBox>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" Spacing="15" VerticalAlignment="Center">
                                <Border CornerRadius="5" Background="DodgerBlue" Padding="8 5">
                                    <Grid>
                                        <TextBlock FontSize="11"
                                                   FontWeight="Bold"
                                                   Foreground="White"
                                                   Text="{markup:I18n {x:Static helper:LangKeys.OriginRoiTitle}}"
                                                   IsVisible="{Binding !IsTargetMode}" />
                                        <TextBlock FontSize="11"
                                                   FontWeight="Bold"
                                                   Foreground="White"
                                                   Text="{markup:I18n {x:Static helper:LangKeys.OriginTargetTitle}}"
                                                   IsVisible="{Binding IsTargetMode}" />
                                    </Grid>
                                </Border>
                                <Button Classes="BasicTight ActionButton"
                                        IsVisible="{Binding !IsTargetMode}"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.SelectRoi}}"
                                        Command="{Binding SelectRoiCommand}">
                                    <Path Data="{StaticResource SelectionRegionGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        IsVisible="{Binding IsTargetMode}"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.SelectRoi}}"
                                        Command="{Binding SelectOriginTargetCommand}">
                                    <Path Data="{StaticResource SelectionRegionGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        IsVisible="{Binding !IsTargetMode}"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.CopyToClipboard}}"
                                        ex:BubbleExtensions.EnableBubble="True"
                                        ex:BubbleExtensions.BubbleContent="{markup:I18n {x:Static helper:LangKeys.CopiedToClipboard}}"
                                        Command="{Binding CopyRoiToClipboardCommand}">
                                    <Path Data="{StaticResource CopyGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        IsVisible="{Binding !IsTargetMode}"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ReadFromClipboard}}"
                                        Command="{Binding PasteRoiFromClipboardCommand}">
                                    <Path Data="{StaticResource ImportImageGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        IsVisible="{Binding IsTargetMode}"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.CopyToClipboard}}"
                                        ex:BubbleExtensions.EnableBubble="True"
                                        ex:BubbleExtensions.BubbleContent="{markup:I18n {x:Static helper:LangKeys.CopiedToClipboard}}"
                                        Command="{Binding CopyOriginTargetToClipboardCommand}">
                                    <Path Data="{StaticResource CopyGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        IsVisible="{Binding IsTargetMode}"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ReadFromClipboard}}"
                                        Command="{Binding PasteOriginTargetFromClipboardCommand}">
                                    <Path Data="{StaticResource ImportImageGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.DeleteRoi}}"
                                        Command="{Binding ClearRoiCommand}"
                                        IsVisible="{Binding !IsTargetMode}">
                                    <Path Data="{StaticResource TrashGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="IndianRed" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.TooltipAddToMatch}}"
                                        Command="{Binding ApplyRoiToMatchCommand}"
                                        IsVisible="{calcBinding:Binding '!IsTargetMode and IsClickTestPanelVisible'}">
                                    <avalonia:FluentIcon Height="18" Icon="ArrowExport" IconSize="Size16"
                                                         IconVariant="Regular" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.DeleteRoi}}"
                                        Command="{Binding ClearOriginTargetCommand}"
                                        IsVisible="{Binding IsTargetMode}">
                                    <Path Data="{StaticResource TrashGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="IndianRed" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.TooltipAddToMatch}}"
                                        Command="{Binding ApplyOriginTargetToMatchCommand}"
                                        IsVisible="{calcBinding:Binding 'IsTargetMode and IsClickTestPanelVisible'}">
                                    <avalonia:FluentIcon Height="18" Icon="ArrowExport" IconSize="Size16"
                                                         IconVariant="Regular" />
                                </Button>
                            </StackPanel>
                            <Border Height="1"
                                    Background="{DynamicResource SukiControlBorderBrush}"
                                    Opacity="0.6" />
                            <Grid IsVisible="{Binding !IsTargetMode}"
                                  ColumnDefinitions="Auto,3*,Auto,3*"
                                  RowDefinitions="Auto,Auto">
                                <TextBlock Text="X:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0" />
                                <TextBox Text="{Binding RoiX, Mode=TwoWay}" Grid.Row="0" Grid.Column="1" />
                                <TextBlock Text="Y:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="2" />
                                <TextBox Text="{Binding RoiY, Mode=TwoWay}" Grid.Row="0" Grid.Column="3" />
                                <TextBlock Text="W:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="0" />
                                <TextBox Text="{Binding RoiW, Mode=TwoWay}" Grid.Row="1" Grid.Column="1" />
                                <TextBlock Text="H:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="2" />
                                <TextBox Text="{Binding RoiH, Mode=TwoWay}" Grid.Row="1" Grid.Column="3" />
                            </Grid>
                            <Grid IsVisible="{Binding IsTargetMode}"
                                  ColumnDefinitions="Auto,3*,Auto,3*"
                                  RowDefinitions="Auto,Auto">
                                <TextBlock Text="X:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0" />
                                <TextBox Text="{Binding OriginTargetX, Mode=TwoWay}" Grid.Row="0" Grid.Column="1" />
                                <TextBlock Text="Y:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="2" />
                                <TextBox Text="{Binding OriginTargetY, Mode=TwoWay}" Grid.Row="0" Grid.Column="3" />
                                <TextBlock Text="W:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="0" />
                                <TextBox Text="{Binding OriginTargetW, Mode=TwoWay}" Grid.Row="1" Grid.Column="1" />
                                <TextBlock Text="H:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="2" />
                                <TextBox Text="{Binding OriginTargetH, Mode=TwoWay}" Grid.Row="1" Grid.Column="3" />
                            </Grid>

                            <StackPanel Orientation="Horizontal" Spacing="15" VerticalAlignment="Center">
                                <Border CornerRadius="5" Background="Orange" Padding="8 5">
                                    <Grid>
                                        <TextBlock FontSize="11"
                                                   FontWeight="Bold"
                                                   Foreground="White"
                                                   Text="{markup:I18n {x:Static helper:LangKeys.TargetRoiTitle}}"
                                                   IsVisible="{Binding !IsTargetMode}" />
                                        <TextBlock FontSize="11"
                                                   FontWeight="Bold"
                                                   Foreground="White"
                                                   Text="{markup:I18n {x:Static helper:LangKeys.TargetTargetTitle}}"
                                                   IsVisible="{Binding IsTargetMode}" />
                                    </Grid>
                                </Border>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.SelectTarget}}"
                                        Command="{Binding SelectTargetCommand}">
                                    <Path Data="{StaticResource SelectionRegionGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.CopyToClipboard}}"
                                        ex:BubbleExtensions.EnableBubble="True"
                                        ex:BubbleExtensions.BubbleContent="{markup:I18n {x:Static helper:LangKeys.CopiedToClipboard}}"
                                        Command="{Binding CopyTargetToClipboardCommand}">
                                    <Path Data="{StaticResource CopyGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ReadFromClipboard}}"
                                        Command="{Binding PasteTargetFromClipboardCommand}">
                                    <Path Data="{StaticResource ImportImageGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.DeleteTarget}}"
                                        Command="{Binding ClearTargetCommand}">
                                    <Path Data="{StaticResource TrashGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="IndianRed" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.TooltipAddToMatch}}"
                                        Command="{Binding ApplyTargetToMatchCommand}"
                                        IsVisible="{Binding IsClickTestPanelVisible}">
                                    <avalonia:FluentIcon Height="18" Icon="ArrowExport" IconSize="Size16"
                                                         IconVariant="Regular" />
                                </Button>
                            </StackPanel>
                            <Border Height="1"
                                    Background="{DynamicResource SukiControlBorderBrush}"
                                    Opacity="0.6" />
                            <Grid ColumnDefinitions="Auto,3*,Auto,3*"
                                  RowDefinitions="Auto,Auto">
                                <TextBlock Text="X:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0" />
                                <TextBox Text="{Binding TargetX, Mode=TwoWay}" Grid.Row="0" Grid.Column="1" />
                                <TextBlock Text="Y:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="2" />
                                <TextBox Text="{Binding TargetY, Mode=TwoWay}" Grid.Row="0" Grid.Column="3" />
                                <TextBlock Text="W:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="0" />
                                <TextBox Text="{Binding TargetW, Mode=TwoWay}" Grid.Row="1" Grid.Column="1" />
                                <TextBlock Text="H:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="2" />
                                <TextBox Text="{Binding TargetH, Mode=TwoWay}" Grid.Row="1" Grid.Column="3" />
                            </Grid>
                            <StackPanel Orientation="Horizontal" Spacing="8" HorizontalAlignment="Left"
                                        VerticalAlignment="Center">
                                <Border CornerRadius="5" Background="LimeGreen" Padding="8 5">
                                    <TextBlock FontSize="11"
                                               FontWeight="Bold"
                                               Foreground="White"
                                               Text="{markup:I18n {x:Static helper:LangKeys.OffsetTitle}}" />
                                </Border>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.CopyToClipboard}}"
                                        ex:BubbleExtensions.EnableBubble="True"
                                        ex:BubbleExtensions.BubbleContent="{markup:I18n {x:Static helper:LangKeys.CopiedToClipboard}}"
                                        Command="{Binding CopyOffsetToClipboardCommand}">
                                    <Path Data="{StaticResource CopyGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                            </StackPanel>
                            <Border Height="1"
                                    Background="{DynamicResource SukiControlBorderBrush}"
                                    Opacity="0.6" />
                            <Grid ColumnDefinitions="Auto,3*,Auto,3*"
                                  RowDefinitions="Auto,Auto">
                                <TextBlock Text="ΔX:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0" />
                                <TextBox Text="{Binding OffsetX}" IsReadOnly="True" Grid.Row="0" Grid.Column="1" />
                                <TextBlock Text="ΔY:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="2" />
                                <TextBox Text="{Binding OffsetY}" IsReadOnly="True" Grid.Row="0" Grid.Column="3" />
                                <TextBlock Text="ΔW:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="0" />
                                <TextBox Text="{Binding OffsetW}" IsReadOnly="True" Grid.Row="1" Grid.Column="1" />
                                <TextBlock Text="ΔH:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="2" />
                                <TextBox Text="{Binding OffsetH}" IsReadOnly="True" Grid.Row="1" Grid.Column="3" />
                            </Grid>
                            <ToggleButton Classes="Flat ActionButton"
                                          IsChecked="{Binding IsClickTestPanelVisible, Mode=TwoWay}">
                                <TextBlock Text="{markup:I18n {x:Static helper:LangKeys.HitTest}}" />
                            </ToggleButton>
                        </StackPanel>
                        <StackPanel
                            IsVisible="{calcBinding:Binding 'ActiveToolMode == pages:LiveViewToolMode.ColorPick'}"
                            Spacing="8">
                            <StackPanel Orientation="Horizontal" Spacing="15" VerticalAlignment="Center">
                                <Border CornerRadius="5" Background="DodgerBlue" Padding="8 5">
                                    <TextBlock FontSize="11"
                                               FontWeight="Bold"
                                               Foreground="White"
                                               Text="{markup:I18n {x:Static helper:LangKeys.LiveViewColorPickRoi}}" />
                                </Border>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.CopyToClipboard}}"
                                        ex:BubbleExtensions.EnableBubble="True"
                                        ex:BubbleExtensions.BubbleContent="{markup:I18n {x:Static helper:LangKeys.CopiedToClipboard}}"
                                        Command="{Binding CopyColorPickRectCommand}">
                                    <Path Data="{StaticResource CopyGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ReadFromClipboard}}"
                                        Command="{Binding PasteColorPickRectCommand}">
                                    <Path Data="{StaticResource ImportImageGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.DeleteRoi}}"
                                        Command="{Binding ClearColorPickCommand}">
                                    <Path Data="{StaticResource TrashGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="IndianRed" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.TooltipAddToMatch}}"
                                        Command="{Binding ApplyColorPickRoiToMatchCommand}"
                                        IsVisible="{Binding IsColorTestPanelVisible}">
                                    <avalonia:FluentIcon Height="18" Icon="ArrowExport" IconSize="Size16"
                                                         IconVariant="Regular" />
                                </Button>
                            </StackPanel>
                            <Grid ColumnDefinitions="Auto,3*,Auto,3*"
                                  RowDefinitions="Auto,Auto">
                                <TextBlock Text="X:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0" />
                                <TextBox Text="{Binding ColorPickX, Mode=TwoWay}" Grid.Row="0" Grid.Column="1" />
                                <TextBlock Text="Y:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="2" />
                                <TextBox Text="{Binding ColorPickY, Mode=TwoWay}" Grid.Row="0" Grid.Column="3" />
                                <TextBlock Text="W:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="0" />
                                <TextBox Text="{Binding ColorPickW, Mode=TwoWay}" Grid.Row="1" Grid.Column="1" />
                                <TextBlock Text="H:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="2" />
                                <TextBox Text="{Binding ColorPickH, Mode=TwoWay}" Grid.Row="1" Grid.Column="3" />
                            </Grid>

                            <StackPanel Orientation="Horizontal" Spacing="15" VerticalAlignment="Center">
                                <Border CornerRadius="5" Background="Orange" Padding="8 5">
                                    <TextBlock FontSize="11"
                                               FontWeight="Bold"
                                               Foreground="White"
                                               Text="{markup:I18n {x:Static helper:LangKeys.LiveViewExpandedRoi}}" />
                                </Border>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.CopyToClipboard}}"
                                        ex:BubbleExtensions.EnableBubble="True"
                                        ex:BubbleExtensions.BubbleContent="{markup:I18n {x:Static helper:LangKeys.CopiedToClipboard}}"
                                        Command="{Binding CopyColorPickExpandedRectCommand}">
                                    <Path Data="{StaticResource CopyGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.TooltipAddToMatch}}"
                                        Command="{Binding ApplyColorPickExpandedRoiToMatchCommand}"
                                        IsVisible="{Binding IsColorTestPanelVisible}">
                                    <avalonia:FluentIcon Height="18" Icon="ArrowExport" IconSize="Size16"
                                                         IconVariant="Regular" />
                                </Button>
                            </StackPanel>
                            <Grid ColumnDefinitions="Auto,3*,Auto,3*"
                                  RowDefinitions="Auto,Auto">
                                <TextBlock Text="X:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0" />
                                <TextBox Text="{Binding ColorPickExpandedX}" IsReadOnly="True" Grid.Row="0"
                                         Grid.Column="1" />
                                <TextBlock Text="Y:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="2" />
                                <TextBox Text="{Binding ColorPickExpandedY}" IsReadOnly="True" Grid.Row="0"
                                         Grid.Column="3" />
                                <TextBlock Text="W:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="0" />
                                <TextBox Text="{Binding ColorPickExpandedW}" IsReadOnly="True" Grid.Row="1"
                                         Grid.Column="1" />
                                <TextBlock Text="H:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="2" />
                                <TextBox Text="{Binding ColorPickExpandedH}" IsReadOnly="True" Grid.Row="1"
                                         Grid.Column="3" />
                            </Grid>


                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <RadioButton GroupName="ColorMode"
                                             IsChecked="{calcBinding:Binding 'ColorMode == 0'}"
                                             Command="{Binding SetColorModeCommand}"
                                             CommandParameter="0">
                                    <TextBlock Text="RGB" />
                                </RadioButton>
                                <RadioButton GroupName="ColorMode"
                                             IsChecked="{calcBinding:Binding 'ColorMode == 1'}"
                                             Command="{Binding SetColorModeCommand}"
                                             CommandParameter="1">
                                    <TextBlock Text="HSV" />
                                </RadioButton>
                                <RadioButton GroupName="ColorMode"
                                             IsChecked="{calcBinding:Binding 'ColorMode == 2'}"
                                             Command="{Binding SetColorModeCommand}"
                                             CommandParameter="2">
                                    <TextBlock Text="Gray" />
                                </RadioButton>
                            </StackPanel>

                            <StackPanel IsVisible="{calcBinding:Binding 'ColorMode == 0'}" Spacing="6">
                                <StackPanel Orientation="Horizontal" Spacing="10" VerticalAlignment="Center">
                                    <Border CornerRadius="5" Background="DodgerBlue" Padding="8 5"
                                            HorizontalAlignment="Left">
                                        <TextBlock FontSize="11" FontWeight="Bold"
                                                   Foreground="White" Text="RGB Upper" />
                                    </Border>
                                    <Button Classes="BasicTight ActionButton"
                                            ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.CopyToClipboard}}"
                                            ex:BubbleExtensions.EnableBubble="True"
                                            ex:BubbleExtensions.BubbleContent="{markup:I18n {x:Static helper:LangKeys.CopiedToClipboard}}"
                                            Command="{Binding CopyRgbUpperCommand}">
                                        <Path Data="{StaticResource CopyGeometry}"
                                              Width="14"
                                              Height="14"
                                              Stretch="Uniform"
                                              Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                    </Button>
                                    <Button Classes="BasicTight ActionButton"
                                            ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ReadFromClipboard}}"
                                            Command="{Binding PasteRgbUpperCommand}">
                                        <Path Data="{StaticResource ImportImageGeometry}"
                                              Width="14"
                                              Height="14"
                                              Stretch="Uniform"
                                              Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                    </Button>
                                    <Button Classes="BasicTight ActionButton"
                                            ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ButtonClear}}"
                                            Command="{Binding ClearRgbUpperCommand}">
                                        <Path Data="{StaticResource TrashGeometry}"
                                              Width="14"
                                              Height="14"
                                              Stretch="Uniform"
                                              Fill="IndianRed" />
                                    </Button>
                                    <Button Classes="BasicTight ActionButton"
                                            ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.TooltipAddToMatch}}"
                                            Command="{Binding ExportColorMatchPairCommand}"
                                            IsVisible="{Binding IsColorTestPanelVisible}">
                                        <avalonia:FluentIcon Height="18" Icon="ArrowExport" IconSize="Size16"
                                                             IconVariant="Regular" />
                                    </Button>
                                </StackPanel>
                                <Grid ColumnDefinitions="Auto,3*,Auto,3*,Auto,3*">
                                    <TextBlock Grid.Column="0" Text="R:" VerticalAlignment="Center" />
                                    <TextBox Grid.Column="1" Text="{Binding RgbUpperR, Mode=TwoWay}" />
                                    <TextBlock Grid.Column="2" Text="G:" VerticalAlignment="Center" />
                                    <TextBox Grid.Column="3" Text="{Binding RgbUpperG, Mode=TwoWay}" />
                                    <TextBlock Grid.Column="4" Text="B:" VerticalAlignment="Center" />
                                    <TextBox Grid.Column="5" Text="{Binding RgbUpperB, Mode=TwoWay}" />
                                </Grid>
                                <StackPanel Orientation="Horizontal" Spacing="10" VerticalAlignment="Center">
                                    <Border CornerRadius="5" Background="Orange" Padding="8 5"
                                            HorizontalAlignment="Left">
                                        <TextBlock FontSize="11" FontWeight="Bold" Foreground="White" Text="RGB Lower" />
                                    </Border>
                                    <Button Classes="BasicTight ActionButton"
                                            ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.CopyToClipboard}}"
                                            ex:BubbleExtensions.EnableBubble="True"
                                            ex:BubbleExtensions.BubbleContent="{markup:I18n {x:Static helper:LangKeys.CopiedToClipboard}}"
                                            Command="{Binding CopyRgbLowerCommand}">
                                        <Path Data="{StaticResource CopyGeometry}"
                                              Width="14"
                                              Height="14"
                                              Stretch="Uniform"
                                              Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                    </Button>
                                    <Button Classes="BasicTight ActionButton"
                                            ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ReadFromClipboard}}"
                                            Command="{Binding PasteRgbLowerCommand}">
                                        <Path Data="{StaticResource ImportImageGeometry}"
                                              Width="14"
                                              Height="14"
                                              Stretch="Uniform"
                                              Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                    </Button>
                                    <Button Classes="BasicTight ActionButton"
                                            ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ButtonClear}}"
                                            Command="{Binding ClearRgbLowerCommand}">
                                        <Path Data="{StaticResource TrashGeometry}"
                                              Width="14"
                                              Height="14"
                                              Stretch="Uniform"
                                              Fill="IndianRed" />
                                    </Button>
                                    <Button Classes="BasicTight ActionButton"
                                            ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.TooltipAddToMatch}}"
                                            Command="{Binding ExportColorMatchPairCommand}"
                                            IsVisible="{Binding IsColorTestPanelVisible}">
                                        <avalonia:FluentIcon Height="18" Icon="ArrowExport" IconSize="Size16"
                                                             IconVariant="Regular" />
                                    </Button>
                                </StackPanel>
                                <Grid ColumnDefinitions="Auto,3*,Auto,3*,Auto,3*">
                                    <TextBlock Grid.Column="0" Text="R:" VerticalAlignment="Center" />
                                    <TextBox Grid.Column="1" Text="{Binding RgbLowerR, Mode=TwoWay}" />
                                    <TextBlock Grid.Column="2" Text="G:" VerticalAlignment="Center" />
                                    <TextBox Grid.Column="3" Text="{Binding RgbLowerG, Mode=TwoWay}" />
                                    <TextBlock Grid.Column="4" Text="B" VerticalAlignment="Center" />
                                    <TextBox Grid.Column="5" Text="{Binding RgbLowerB, Mode=TwoWay}" />
                                </Grid>
                            </StackPanel>

                            <StackPanel IsVisible="{calcBinding:Binding 'ColorMode == 1'}" Spacing="6">
                                <StackPanel Orientation="Horizontal" Spacing="10" VerticalAlignment="Center">
                                    <Border CornerRadius="5" Background="DodgerBlue" Padding="8 5"
                                            HorizontalAlignment="Left">
                                        <TextBlock FontSize="11" Foreground="White" FontWeight="Bold" Text="HSV Upper" />
                                    </Border>
                                    <Button Classes="BasicTight ActionButton"
                                            ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.CopyToClipboard}}"
                                            ex:BubbleExtensions.EnableBubble="True"
                                            ex:BubbleExtensions.BubbleContent="{markup:I18n {x:Static helper:LangKeys.CopiedToClipboard}}"
                                            Command="{Binding CopyHsvUpperCommand}">
                                        <Path Data="{StaticResource CopyGeometry}"
                                              Width="14"
                                              Height="14"
                                              Stretch="Uniform"
                                              Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                    </Button>
                                    <Button Classes="BasicTight ActionButton"
                                            ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ReadFromClipboard}}"
                                            Command="{Binding PasteHsvUpperCommand}">
                                        <Path Data="{StaticResource ImportImageGeometry}"
                                              Width="14"
                                              Height="14"
                                              Stretch="Uniform"
                                              Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                    </Button>
                                    <Button Classes="BasicTight ActionButton"
                                            ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ButtonClear}}"
                                            Command="{Binding ClearHsvUpperCommand}">
                                        <Path Data="{StaticResource TrashGeometry}"
                                              Width="14"
                                              Height="14"
                                              Stretch="Uniform"
                                              Fill="IndianRed" />
                                    </Button>
                                    <Button Classes="BasicTight ActionButton"
                                            ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.TooltipAddToMatch}}"
                                            Command="{Binding ExportColorMatchPairCommand}"
                                            IsVisible="{Binding IsColorTestPanelVisible}">
                                        <avalonia:FluentIcon Height="18" Icon="ArrowExport" IconSize="Size16"
                                                             IconVariant="Regular" />
                                    </Button>
                                </StackPanel>
                                <Grid ColumnDefinitions="Auto,3*,Auto,3*,Auto,3*">
                                    <TextBlock Grid.Column="0" Text="H:" VerticalAlignment="Center" />
                                    <TextBox Grid.Column="1" Text="{Binding HsvUpperH, Mode=TwoWay}" />
                                    <TextBlock Grid.Column="2" Text="S:" VerticalAlignment="Center" />
                                    <TextBox Grid.Column="3" Text="{Binding HsvUpperS, Mode=TwoWay}" />
                                    <TextBlock Grid.Column="4" Text="V:" VerticalAlignment="Center" />
                                    <TextBox Grid.Column="5" Text="{Binding HsvUpperV, Mode=TwoWay}" />
                                </Grid>
                                <StackPanel Orientation="Horizontal" Spacing="10" VerticalAlignment="Center">
                                    <Border CornerRadius="5" Background="Orange" Padding="8 5"
                                            HorizontalAlignment="Left">
                                        <TextBlock FontSize="11" Foreground="White" FontWeight="Bold" Text="HSV Lower" />
                                    </Border>
                                    <Button Classes="BasicTight ActionButton"
                                            ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.CopyToClipboard}}"
                                            ex:BubbleExtensions.EnableBubble="True"
                                            ex:BubbleExtensions.BubbleContent="{markup:I18n {x:Static helper:LangKeys.CopiedToClipboard}}"
                                            Command="{Binding CopyHsvLowerCommand}">
                                        <Path Data="{StaticResource CopyGeometry}"
                                              Width="14"
                                              Height="14"
                                              Stretch="Uniform"
                                              Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                    </Button>
                                    <Button Classes="BasicTight ActionButton"
                                            ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ReadFromClipboard}}"
                                            Command="{Binding PasteHsvLowerCommand}">
                                        <Path Data="{StaticResource ImportImageGeometry}"
                                              Width="14"
                                              Height="14"
                                              Stretch="Uniform"
                                              Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                    </Button>
                                    <Button Classes="BasicTight ActionButton"
                                            ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ButtonClear}}"
                                            Command="{Binding ClearHsvLowerCommand}">
                                        <Path Data="{StaticResource TrashGeometry}"
                                              Width="14"
                                              Height="14"
                                              Stretch="Uniform"
                                              Fill="IndianRed" />
                                    </Button>
                                    <Button Classes="BasicTight ActionButton"
                                            ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.TooltipAddToMatch}}"
                                            Command="{Binding ExportColorMatchPairCommand}"
                                            IsVisible="{Binding IsColorTestPanelVisible}">
                                        <avalonia:FluentIcon Height="18" Icon="ArrowExport" IconSize="Size16"
                                                             IconVariant="Regular" />
                                    </Button>
                                </StackPanel>
                                <Grid ColumnDefinitions="Auto,3*,Auto,3*,Auto,3*">
                                    <TextBlock Grid.Column="0" Text="H:" VerticalAlignment="Center" />
                                    <TextBox Grid.Column="1" Text="{Binding HsvLowerH, Mode=TwoWay}" />
                                    <TextBlock Grid.Column="2" Text="S:" VerticalAlignment="Center" />
                                    <TextBox Grid.Column="3" Text="{Binding HsvLowerS, Mode=TwoWay}" />
                                    <TextBlock Grid.Column="4" Text="V:" VerticalAlignment="Center" />
                                    <TextBox Grid.Column="5" Text="{Binding HsvLowerV, Mode=TwoWay}" />
                                </Grid>
                            </StackPanel>

                            <StackPanel IsVisible="{calcBinding:Binding 'ColorMode == 2'}" Spacing="6">
                                <StackPanel Orientation="Horizontal" Spacing="10" VerticalAlignment="Center">
                                    <Border CornerRadius="5" Background="DodgerBlue" Padding="8 5"
                                            HorizontalAlignment="Left">
                                        <TextBlock FontSize="11" Foreground="White" FontWeight="Bold" Text="Gray Upper" />
                                    </Border>
                                    <Button Classes="BasicTight ActionButton"
                                            ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.CopyToClipboard}}"
                                            ex:BubbleExtensions.EnableBubble="True"
                                            ex:BubbleExtensions.BubbleContent="{markup:I18n {x:Static helper:LangKeys.CopiedToClipboard}}"
                                            Command="{Binding CopyGrayUpperCommand}">
                                        <Path Data="{StaticResource CopyGeometry}"
                                              Width="14"
                                              Height="14"
                                              Stretch="Uniform"
                                              Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                    </Button>
                                    <Button Classes="BasicTight ActionButton"
                                            ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ReadFromClipboard}}"
                                            Command="{Binding PasteGrayUpperCommand}">
                                        <Path Data="{StaticResource ImportImageGeometry}"
                                              Width="14"
                                              Height="14"
                                              Stretch="Uniform"
                                              Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                    </Button>
                                    <Button Classes="BasicTight ActionButton"
                                            ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ButtonClear}}"
                                            Command="{Binding ClearGrayUpperCommand}">
                                        <Path Data="{StaticResource TrashGeometry}"
                                              Width="14"
                                              Height="14"
                                              Stretch="Uniform"
                                              Fill="IndianRed" />
                                    </Button>
                                    <Button Classes="BasicTight ActionButton"
                                            ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.TooltipAddToMatch}}"
                                            Command="{Binding ExportColorMatchPairCommand}"
                                            IsVisible="{Binding IsColorTestPanelVisible}">
                                        <avalonia:FluentIcon Height="18" Icon="ArrowExport" IconSize="Size16"
                                                             IconVariant="Regular" />
                                    </Button>
                                </StackPanel>
                                <Grid ColumnDefinitions="Auto,3*">
                                    <TextBlock Grid.Column="0" Text="G:" VerticalAlignment="Center" />
                                    <TextBox Grid.Column="1" Text="{Binding GrayUpper, Mode=TwoWay}" />
                                </Grid>
                                <StackPanel Orientation="Horizontal" Spacing="10" VerticalAlignment="Center">
                                    <Border CornerRadius="5" Background="Orange" Padding="8 5"
                                            HorizontalAlignment="Left">
                                        <TextBlock FontSize="11" Foreground="White" FontWeight="Bold" Text="Gray Lower" />
                                    </Border>
                                    <Button Classes="BasicTight ActionButton"
                                            ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.CopyToClipboard}}"
                                            ex:BubbleExtensions.EnableBubble="True"
                                            ex:BubbleExtensions.BubbleContent="{markup:I18n {x:Static helper:LangKeys.CopiedToClipboard}}"
                                            Command="{Binding CopyGrayLowerCommand}">
                                        <Path Data="{StaticResource CopyGeometry}"
                                              Width="14"
                                              Height="14"
                                              Stretch="Uniform"
                                              Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                    </Button>
                                    <Button Classes="BasicTight ActionButton"
                                            ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ReadFromClipboard}}"
                                            Command="{Binding PasteGrayLowerCommand}">
                                        <Path Data="{StaticResource ImportImageGeometry}"
                                              Width="14"
                                              Height="14"
                                              Stretch="Uniform"
                                              Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                    </Button>
                                    <Button Classes="BasicTight ActionButton"
                                            ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ButtonClear}}"
                                            Command="{Binding ClearGrayLowerCommand}">
                                        <Path Data="{StaticResource TrashGeometry}"
                                              Width="14"
                                              Height="14"
                                              Stretch="Uniform"
                                              Fill="IndianRed" />
                                    </Button>
                                    <Button Classes="BasicTight ActionButton"
                                            ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.TooltipAddToMatch}}"
                                            Command="{Binding ExportColorMatchPairCommand}"
                                            IsVisible="{Binding IsColorTestPanelVisible}">
                                        <avalonia:FluentIcon Height="18" Icon="ArrowExport" IconSize="Size16"
                                                             IconVariant="Regular" />
                                    </Button>
                                </StackPanel>
                                <Grid ColumnDefinitions="Auto,3*">
                                    <TextBlock Grid.Column="0" Text="G:" VerticalAlignment="Center" />
                                    <TextBox Grid.Column="1" Text="{Binding GrayLower, Mode=TwoWay}" />
                                </Grid>
                            </StackPanel>

                            <ToggleButton Classes="Flat ActionButton"
                                          IsChecked="{Binding IsColorTestPanelVisible, Mode=TwoWay}">
                                <TextBlock Text="{markup:I18n {x:Static helper:LangKeys.HitTest}}" />
                            </ToggleButton>
                        </StackPanel>


                        <StackPanel
                            IsVisible="{calcBinding:Binding 'ActiveToolMode == pages:LiveViewToolMode.Screenshot'}"
                            Spacing="8">
                            <StackPanel Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
                                <RadioButton GroupName="ScreenshotMode"
                                             IsChecked="{calcBinding:Binding '!IsScreenshotBrushMode'}"
                                             Command="{Binding SetScreenshotModeCommand}"
                                             CommandParameter="Crop">
                                    <TextBlock Text="{markup:I18n {x:Static helper:LangKeys.ScreenshotCropMode}}" />
                                </RadioButton>
                                <RadioButton GroupName="ScreenshotMode"
                                             IsChecked="{Binding IsScreenshotBrushMode}"
                                             Command="{Binding SetScreenshotModeCommand}"
                                             CommandParameter="Brush">
                                    <TextBlock Text="{markup:I18n {x:Static helper:LangKeys.ScreenshotBrushMode}}" />
                                </RadioButton>
                                <Button Classes="Flat ActionButton"
                                        IsVisible="{Binding IsScreenshotBrushMode}"
                                        Command="{Binding ResetScreenshotBrushCommand}">
                                    <TextBlock Text="{markup:I18n {x:Static helper:LangKeys.ScreenshotRestore}}" />
                                </Button>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" Spacing="8" VerticalAlignment="Center"
                                        IsVisible="{Binding IsScreenshotBrushMode}">
                                <TextBlock FontSize="12" VerticalAlignment="Center"
                                           Foreground="{DynamicResource SukiLowText}"
                                           Text="{markup:I18n {x:Static helper:LangKeys.ScreenshotBrushSize}}" />
                                <Slider Width="140"
                                        Minimum="1"
                                        Maximum="20"
                                        Value="{Binding ScreenshotBrushSize, Mode=TwoWay}" />
                                <TextBlock FontSize="14" VerticalAlignment="Center"
                                           Foreground="{DynamicResource SukiLowText}"
                                           Text="{Binding ScreenshotBrushSize}" />
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" Spacing="15" VerticalAlignment="Center"
                                        IsVisible="{calcBinding:Binding '!IsScreenshotBrushMode'}">
                                <Border CornerRadius="5" Background="DodgerBlue" Padding="8 5">
                                    <TextBlock FontSize="11"
                                               FontWeight="Bold"
                                               Foreground="White"
                                               Text="{markup:I18n {x:Static helper:LangKeys.LiveViewScreenshotRoi}}" />
                                </Border>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.CopyToClipboard}}"
                                        ex:BubbleExtensions.EnableBubble="True"
                                        ex:BubbleExtensions.BubbleContent="{markup:I18n {x:Static helper:LangKeys.CopiedToClipboard}}"
                                        Command="{Binding CopyScreenshotRectCommand}">
                                    <Path Data="{StaticResource CopyGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ReadFromClipboard}}"
                                        Command="{Binding PasteScreenshotRectCommand}">
                                    <Path Data="{StaticResource ImportImageGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.DeleteRoi}}"
                                        Command="{Binding ClearScreenshotCommand}">
                                    <Path Data="{StaticResource TrashGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="IndianRed" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.TooltipAddToMatch}}"
                                        Command="{Binding ApplyScreenshotRoiToMatchCommand}"
                                        IsVisible="{Binding IsScreenshotTestPanelVisible}">
                                    <avalonia:FluentIcon Height="18" Icon="ArrowExport" IconSize="Size16"
                                                         IconVariant="Regular" />
                                </Button>
                            </StackPanel>

                            <Grid ColumnDefinitions="Auto,3*,Auto,3*"
                                  RowDefinitions="Auto,Auto">
                                <TextBlock Text="X:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0" />
                                <TextBox Text="{Binding ScreenshotX, Mode=TwoWay}" Grid.Row="0" Grid.Column="1" />
                                <TextBlock Text="Y:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="2" />
                                <TextBox Text="{Binding ScreenshotY, Mode=TwoWay}" Grid.Row="0" Grid.Column="3" />
                                <TextBlock Text="W:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="0" />
                                <TextBox Text="{Binding ScreenshotW, Mode=TwoWay}" Grid.Row="1" Grid.Column="1" />
                                <TextBlock Text="H:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="2" />
                                <TextBox Text="{Binding ScreenshotH, Mode=TwoWay}" Grid.Row="1" Grid.Column="3" />
                            </Grid>

                            <StackPanel Orientation="Horizontal" Spacing="15" VerticalAlignment="Center">
                                <Border CornerRadius="5" Background="Orange" Padding="8 5">
                                    <TextBlock FontSize="11"
                                               FontWeight="Bold"
                                               Foreground="White"
                                               Text="{markup:I18n {x:Static helper:LangKeys.LiveViewExpandedRoi}}" />
                                </Border>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.CopyToClipboard}}"
                                        ex:BubbleExtensions.EnableBubble="True"
                                        ex:BubbleExtensions.BubbleContent="{markup:I18n {x:Static helper:LangKeys.CopiedToClipboard}}"
                                        Command="{Binding CopyScreenshotExpandedRectCommand}">
                                    <Path Data="{StaticResource CopyGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.TooltipAddToMatch}}"
                                        Command="{Binding ApplyScreenshotExpandedRoiToMatchCommand}"
                                        IsVisible="{Binding IsScreenshotTestPanelVisible}">
                                    <avalonia:FluentIcon Height="18" Icon="ArrowExport" IconSize="Size16"
                                                         IconVariant="Regular" />
                                </Button>
                            </StackPanel>
                            <Grid ColumnDefinitions="Auto,3*,Auto,3*"
                                  RowDefinitions="Auto,Auto">
                                <TextBlock Text="X:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0" />
                                <TextBox Text="{Binding ScreenshotExpandedX}" IsReadOnly="True" Grid.Row="0"
                                         Grid.Column="1" />
                                <TextBlock Text="Y:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="2" />
                                <TextBox Text="{Binding ScreenshotExpandedY}" IsReadOnly="True" Grid.Row="0"
                                         Grid.Column="3" />
                                <TextBlock Text="W:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="0" />
                                <TextBox Text="{Binding ScreenshotExpandedW}" IsReadOnly="True" Grid.Row="1"
                                         Grid.Column="1" />
                                <TextBlock Text="H:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="2" />
                                <TextBox Text="{Binding ScreenshotExpandedH}" IsReadOnly="True" Grid.Row="1"
                                         Grid.Column="3" />
                            </Grid>

                            <TextBlock FontSize="11"
                                       Foreground="{DynamicResource SukiLowText}"
                                       Text="{markup:I18n {x:Static helper:LangKeys.LiveViewRelativePathPrefix}}" />
                            <TextBox Text="{Binding ScreenshotRelativePath, Mode=TwoWay}" />
                            <StackPanel Orientation="Horizontal" Spacing="15" VerticalAlignment="Center">
                                <Border CornerRadius="5" Background="LimeGreen" Padding="8 5"
                                        HorizontalAlignment="Left">
                                    <TextBlock FontSize="11"
                                               FontWeight="Bold"
                                               Foreground="White"
                                               Text="{markup:I18n {x:Static helper:LangKeys.Result}}" />
                                </Border>
                                <Button Classes="BasicTight ActionButton"
                                        Command="{Binding SaveScreenshotCommand}">
                                    <TextBlock Text="{markup:I18n {x:Static helper:LangKeys.SaveScreenshot}}" />
                                </Button>
                            </StackPanel>
                            <TextBox Text="{Binding ScreenshotRelativeResult}"
                                     IsReadOnly="True" />
                            <ToggleButton Classes="Flat ActionButton"
                                          IsChecked="{Binding IsScreenshotTestPanelVisible, Mode=TwoWay}">
                                <TextBlock Text="{markup:I18n {x:Static helper:LangKeys.HitTest}}" />
                            </ToggleButton>
                        </StackPanel>

                        <StackPanel IsVisible="{calcBinding:Binding 'ActiveToolMode == pages:LiveViewToolMode.Swipe'}"
                                    Spacing="8">
                            <StackPanel Orientation="Horizontal" Spacing="15" VerticalAlignment="Center">
                                <Border CornerRadius="5" Background="DodgerBlue" Padding="8 5">
                                    <TextBlock FontSize="11"
                                               FontWeight="Bold"
                                               Foreground="White"
                                               Text="{markup:I18n {x:Static helper:LangKeys.LiveViewSwipeStart}}" />
                                </Border>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.CopyToClipboard}}"
                                        ex:BubbleExtensions.EnableBubble="True"
                                        ex:BubbleExtensions.BubbleContent="{markup:I18n {x:Static helper:LangKeys.CopiedToClipboard}}"
                                        Command="{Binding CopySwipeStartCommand}">
                                    <Path Data="{StaticResource CopyGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ReadFromClipboard}}"
                                        Command="{Binding PasteSwipeStartCommand}">
                                    <Path Data="{StaticResource ImportImageGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                            </StackPanel>
                            <Grid ColumnDefinitions="Auto,3*,Auto,3*">
                                <TextBlock Text="X:" VerticalAlignment="Center" Grid.Column="0" />
                                <TextBox Text="{Binding SwipeStartX, Mode=TwoWay}" Grid.Column="1" />
                                <TextBlock Text="Y:" VerticalAlignment="Center" Grid.Column="2" />
                                <TextBox Text="{Binding SwipeStartY, Mode=TwoWay}" Grid.Column="3" />
                            </Grid>

                            <StackPanel Orientation="Horizontal" Spacing="15" VerticalAlignment="Center">
                                <Border CornerRadius="5" Background="Orange" Padding="8 5">
                                    <TextBlock FontSize="11"
                                               FontWeight="Bold"
                                               Foreground="White"
                                               Text="{markup:I18n {x:Static helper:LangKeys.LiveViewSwipeEnd}}" />
                                </Border>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.CopyToClipboard}}"
                                        ex:BubbleExtensions.EnableBubble="True"
                                        ex:BubbleExtensions.BubbleContent="{markup:I18n {x:Static helper:LangKeys.CopiedToClipboard}}"
                                        Command="{Binding CopySwipeEndCommand}">
                                    <Path Data="{StaticResource CopyGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ReadFromClipboard}}"
                                        Command="{Binding PasteSwipeEndCommand}">
                                    <Path Data="{StaticResource ImportImageGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.DeleteRoi}}"
                                        Command="{Binding ClearSwipeCommand}">
                                    <Path Data="{StaticResource TrashGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="IndianRed" />
                                </Button>
                            </StackPanel>
                            <Grid ColumnDefinitions="Auto,3*,Auto,3*">
                                <TextBlock Text="X:" VerticalAlignment="Center" Grid.Column="0" />
                                <TextBox Text="{Binding SwipeEndX, Mode=TwoWay}" Grid.Column="1" />
                                <TextBlock Text="Y:" VerticalAlignment="Center" Grid.Column="2" />
                                <TextBox Text="{Binding SwipeEndY, Mode=TwoWay}" Grid.Column="3" />
                            </Grid>
                            <ToggleButton Classes="Flat ActionButton"
                                          IsChecked="{Binding IsSwipeTestPanelVisible, Mode=TwoWay}">
                                <TextBlock Text="{markup:I18n {x:Static helper:LangKeys.HitTest}}" />
                            </ToggleButton>
                        </StackPanel>

                        <StackPanel IsVisible="{calcBinding:Binding 'ActiveToolMode == pages:LiveViewToolMode.Ocr'}"
                                    Spacing="8">
                            <StackPanel Orientation="Horizontal" Spacing="15" VerticalAlignment="Center">
                                <Border CornerRadius="5" Background="DodgerBlue" Padding="8 5">
                                    <TextBlock FontSize="11"
                                               FontWeight="Bold"
                                               Foreground="White"
                                               Text="{markup:I18n {x:Static helper:LangKeys.LiveViewOcrRoi}}" />
                                </Border>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.CopyToClipboard}}"
                                        ex:BubbleExtensions.EnableBubble="True"
                                        ex:BubbleExtensions.BubbleContent="{markup:I18n {x:Static helper:LangKeys.CopiedToClipboard}}"
                                        Command="{Binding CopyOcrRectCommand}">
                                    <Path Data="{StaticResource CopyGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ReadFromClipboard}}"
                                        Command="{Binding PasteOcrRectCommand}">
                                    <Path Data="{StaticResource ImportImageGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.DeleteRoi}}"
                                        Command="{Binding ClearOcrCommand}">
                                    <Path Data="{StaticResource TrashGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="IndianRed" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.TooltipAddToMatch}}"
                                        Command="{Binding ApplyOcrRoiToMatchCommand}"
                                        IsVisible="{Binding IsOcrTestPanelVisible}">
                                    <avalonia:FluentIcon Height="18" Icon="ArrowExport" IconSize="Size16"
                                                         IconVariant="Regular" />
                                </Button>
                            </StackPanel>
                            <Grid ColumnDefinitions="Auto,3*,Auto,3*"
                                  RowDefinitions="Auto,Auto">
                                <TextBlock Text="X:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0" />
                                <TextBox Text="{Binding OcrX, Mode=TwoWay}" Grid.Row="0" Grid.Column="1" />
                                <TextBlock Text="Y:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="2" />
                                <TextBox Text="{Binding OcrY, Mode=TwoWay}" Grid.Row="0" Grid.Column="3" />
                                <TextBlock Text="W:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="0" />
                                <TextBox Text="{Binding OcrW, Mode=TwoWay}" Grid.Row="1" Grid.Column="1" />
                                <TextBlock Text="H:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="2" />
                                <TextBox Text="{Binding OcrH, Mode=TwoWay}" Grid.Row="1" Grid.Column="3" />
                            </Grid>

                            <StackPanel Orientation="Horizontal" Spacing="15" VerticalAlignment="Center">
                                <Border CornerRadius="5" Background="Orange" Padding="8 5">
                                    <TextBlock FontSize="11"
                                               FontWeight="Bold"
                                               Foreground="White"
                                               Text="{markup:I18n {x:Static helper:LangKeys.LiveViewExpandedRoi}}" />
                                </Border>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.CopyToClipboard}}"
                                        ex:BubbleExtensions.EnableBubble="True"
                                        ex:BubbleExtensions.BubbleContent="{markup:I18n {x:Static helper:LangKeys.CopiedToClipboard}}"
                                        Command="{Binding CopyOcrExpandedRectCommand}">
                                    <Path Data="{StaticResource CopyGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.TooltipAddToMatch}}"
                                        Command="{Binding ApplyOcrExpandedRoiToMatchCommand}"
                                        IsVisible="{Binding IsOcrTestPanelVisible}">
                                    <avalonia:FluentIcon Height="18" Icon="ArrowExport" IconSize="Size16"
                                                         IconVariant="Regular" />
                                </Button>
                            </StackPanel>
                            <Grid ColumnDefinitions="Auto,3*,Auto,3*"
                                  RowDefinitions="Auto,Auto">
                                <TextBlock Text="X:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0" />
                                <TextBox Text="{Binding OcrExpandedX}" IsReadOnly="True" Grid.Row="0" Grid.Column="1" />
                                <TextBlock Text="Y:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="2" />
                                <TextBox Text="{Binding OcrExpandedY}" IsReadOnly="True" Grid.Row="0" Grid.Column="3" />
                                <TextBlock Text="W:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="0" />
                                <TextBox Text="{Binding OcrExpandedW}" IsReadOnly="True" Grid.Row="1" Grid.Column="1" />
                                <TextBlock Text="H:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="2" />
                                <TextBox Text="{Binding OcrExpandedH}" IsReadOnly="True" Grid.Row="1" Grid.Column="3" />
                            </Grid>

                            <StackPanel Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
                                <Border CornerRadius="5" Background="LimeGreen" Padding="8 5">
                                    <TextBlock FontSize="11"
                                               FontWeight="Bold"
                                               Foreground="White"
                                               Text="{markup:I18n {x:Static helper:LangKeys.LiveViewOcrResult}}" />
                                </Border>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.CopyToClipboard}}"
                                        ex:BubbleExtensions.EnableBubble="True"
                                        ex:BubbleExtensions.BubbleContent="{markup:I18n {x:Static helper:LangKeys.CopiedToClipboard}}"
                                        Command="{Binding CopyOcrResultCommand}">
                                    <Path Data="{StaticResource CopyGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        Command="{Binding RunOcrCommand}"
                                        IsEnabled="{calcBinding:Binding '!IsRunning'}">
                                    <TextBlock Text="{markup:I18n {x:Static helper:LangKeys.LiveViewRunOcr}}" />
                                </Button>
                            </StackPanel>
                            <TextBox Text="{Binding OcrResult}"
                                     IsReadOnly="True" />
                            <ToggleButton Classes="Flat ActionButton"
                                          IsChecked="{Binding IsOcrTestPanelVisible, Mode=TwoWay}">
                                <TextBlock Text="{markup:I18n {x:Static helper:LangKeys.HitTest}}" />
                            </ToggleButton>
                        </StackPanel>
                        <!-- Neural Network Detect ToolPanel -->
                        <StackPanel
                            IsVisible="{calcBinding:Binding 'ActiveToolMode == pages:LiveViewToolMode.NeuralNetworkDetect'}"
                            Spacing="8">
                            <StackPanel Orientation="Horizontal" Spacing="15" VerticalAlignment="Center">
                                <Border CornerRadius="5" Background="DodgerBlue" Padding="8 5">
                                    <TextBlock FontSize="11"
                                               FontWeight="Bold"
                                               Foreground="White"
                                               Text="{markup:I18n {x:Static helper:LangKeys.LiveViewNeuralNetworkDetectRoi}}" />
                                </Border>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.CopyToClipboard}}"
                                        ex:BubbleExtensions.EnableBubble="True"
                                        ex:BubbleExtensions.BubbleContent="{markup:I18n {x:Static helper:LangKeys.CopiedToClipboard}}"
                                        Command="{Binding CopyNeuralNetworkDetectRectCommand}">
                                    <Path Data="{StaticResource CopyGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ReadFromClipboard}}"
                                        Command="{Binding PasteNeuralNetworkDetectRectCommand}">
                                    <Path Data="{StaticResource ImportImageGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.DeleteRoi}}"
                                        Command="{Binding ClearNeuralNetworkDetectCommand}">
                                    <Path Data="{StaticResource TrashGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="IndianRed" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.TooltipAddToMatch}}"
                                        Command="{Binding ApplyNeuralNetworkDetectRoiToMatchCommand}"
                                        IsVisible="{Binding IsNeuralNetworkDetectTestPanelVisible}">
                                    <avalonia:FluentIcon Height="18" Icon="ArrowExport" IconSize="Size16"
                                                         IconVariant="Regular" />
                                </Button>
                            </StackPanel>
                            <Grid ColumnDefinitions="Auto,3*,Auto,3*"
                                  RowDefinitions="Auto,Auto">
                                <TextBlock Text="X:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0" />
                                <TextBox Text="{Binding NeuralNetworkDetectRoiX, Mode=TwoWay}" Grid.Row="0"
                                         Grid.Column="1" />
                                <TextBlock Text="Y:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="2" />
                                <TextBox Text="{Binding NeuralNetworkDetectRoiY, Mode=TwoWay}" Grid.Row="0"
                                         Grid.Column="3" />
                                <TextBlock Text="W:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="0" />
                                <TextBox Text="{Binding NeuralNetworkDetectRoiW, Mode=TwoWay}" Grid.Row="1"
                                         Grid.Column="1" />
                                <TextBlock Text="H:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="2" />
                                <TextBox Text="{Binding NeuralNetworkDetectRoiH, Mode=TwoWay}" Grid.Row="1"
                                         Grid.Column="3" />
                            </Grid>

                            <StackPanel Orientation="Horizontal" Spacing="15" VerticalAlignment="Center">
                                <Border CornerRadius="5" Background="Orange" Padding="8 5">
                                    <TextBlock FontSize="11"
                                               FontWeight="Bold"
                                               Foreground="White"
                                               Text="{markup:I18n {x:Static helper:LangKeys.LiveViewExpandedRoi}}" />
                                </Border>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.CopyToClipboard}}"
                                        ex:BubbleExtensions.EnableBubble="True"
                                        ex:BubbleExtensions.BubbleContent="{markup:I18n {x:Static helper:LangKeys.CopiedToClipboard}}"
                                        Command="{Binding CopyNeuralNetworkDetectExpandedRectCommand}">
                                    <Path Data="{StaticResource CopyGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.TooltipAddToMatch}}"
                                        Command="{Binding ApplyNeuralNetworkDetectExpandedRoiToMatchCommand}"
                                        IsVisible="{Binding IsNeuralNetworkDetectTestPanelVisible}">
                                    <avalonia:FluentIcon Height="18" Icon="ArrowExport" IconSize="Size16"
                                                         IconVariant="Regular" />
                                </Button>
                            </StackPanel>
                            <Grid ColumnDefinitions="Auto,3*,Auto,3*"
                                  RowDefinitions="Auto,Auto">
                                <TextBlock Text="X:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0" />
                                <TextBox Text="{Binding NeuralNetworkDetectExpandedX}" IsReadOnly="True" Grid.Row="0"
                                         Grid.Column="1" />
                                <TextBlock Text="Y:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="2" />
                                <TextBox Text="{Binding NeuralNetworkDetectExpandedY}" IsReadOnly="True" Grid.Row="0"
                                         Grid.Column="3" />
                                <TextBlock Text="W:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="0" />
                                <TextBox Text="{Binding NeuralNetworkDetectExpandedW}" IsReadOnly="True" Grid.Row="1"
                                         Grid.Column="1" />
                                <TextBlock Text="H:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="2" />
                                <TextBox Text="{Binding NeuralNetworkDetectExpandedH}" IsReadOnly="True" Grid.Row="1"
                                         Grid.Column="3" />
                            </Grid>

                            <ToggleButton Classes="Flat ActionButton"
                                          IsChecked="{Binding IsNeuralNetworkDetectTestPanelVisible, Mode=TwoWay}">
                                <TextBlock Text="{markup:I18n {x:Static helper:LangKeys.HitTest}}" />
                            </ToggleButton>
                        </StackPanel>
                        <StackPanel IsVisible="{calcBinding:Binding 'ActiveToolMode == pages:LiveViewToolMode.Key'}"
                                    Spacing="8">
                            <TextBlock FontSize="12"
                                       FontWeight="Bold"
                                       Foreground="{DynamicResource SukiLowText}"
                                       Text="{markup:I18n {x:Static helper:LangKeys.KeyModeTitle}}" />
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <RadioButton GroupName="KeyCodeMode"
                                             IsChecked="{calcBinding:Binding '!IsKeyCodeAdb'}"
                                             Command="{Binding SetKeyCodeModeCommand}"
                                             CommandParameter="Win32">
                                    <TextBlock Text="{markup:I18n {x:Static helper:LangKeys.KeyCodeModeWin32}}" />
                                </RadioButton>
                                <RadioButton GroupName="KeyCodeMode"
                                             IsChecked="{Binding IsKeyCodeAdb}"
                                             Command="{Binding SetKeyCodeModeCommand}"
                                             CommandParameter="Adb">
                                    <TextBlock Text="{markup:I18n {x:Static helper:LangKeys.KeyCodeModeAdb}}" />
                                </RadioButton>
                            </StackPanel>
                            <Button Classes="Flat ActionButton"
                                    IsVisible="{Binding !IsKeyCodeAdb}"
                                    Click="OnKeyCaptureButtonClick"
                                    Command="{Binding StartKeyCaptureCommand}">
                                <TextBlock Text="{markup:I18n {x:Static helper:LangKeys.KeyCaptureButton}}" />
                            </Button>
                            <Border VerticalAlignment="Center" HorizontalAlignment="Left" CornerRadius="5"
                                    Background="DodgerBlue" Padding="8 5">
                                <TextBlock FontSize="11"
                                           FontWeight="Bold"
                                           Foreground="White"
                                           Text="{markup:I18n {x:Static helper:LangKeys.KeyCaptureKeyLabel}}" />
                            </Border>
                            <AutoCompleteBox IsVisible="{Binding IsKeyCodeAdb}"
                                             ItemsSource="{Binding AdbKeyOptions}"
                                             Watermark="{markup:I18n {x:Static helper:LangKeys.KeyInputWatermark}}"
                                             Text="{Binding AdbKeyInput, Mode=TwoWay}"
                                             FilterMode="Contains" />
                            <AutoCompleteBox IsVisible="{Binding !IsKeyCodeAdb}"
                                             ItemsSource="{Binding Win32KeyOptions}"
                                             Watermark="{markup:I18n {x:Static helper:LangKeys.KeyInputWatermark}}"
                                             Text="{Binding Win32KeyInput, Mode=TwoWay}"
                                             FilterMode="Contains" />
                            <Border VerticalAlignment="Center" HorizontalAlignment="Left" CornerRadius="5"
                                    Background="Orange" Padding="8 5">
                                <TextBlock FontSize="11" FontWeight="Bold"
                                           Foreground="White"
                                           Text="{markup:I18n {x:Static helper:LangKeys.KeyCaptureCodeLabel}}" />
                            </Border>
                            <TextBox Text="{Binding KeyCaptureCode}" />
                            <ToggleButton Classes="Flat ActionButton"
                                          IsChecked="{Binding IsKeyTestPanelVisible, Mode=TwoWay}">
                                <TextBlock Text="{markup:I18n {x:Static helper:LangKeys.HitTest}}" />
                            </ToggleButton>
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>
            </suki:GlassCard>

            <suki:GlassCard Grid.Column="2"
                            Margin="10,0,0,0"
                            IsAnimated="False"
                            IsVisible="{Binding IsTestPanelVisible}">
                <ScrollViewer Margin="12" VerticalScrollBarVisibility="Auto">
                    <StackPanel Spacing="10">
                        <StackPanel IsVisible="{Binding IsOcrTestPanelVisible}"
                                    Spacing="8">
                            <TextBlock FontSize="12"
                                       FontWeight="Bold"
                                       Foreground="{DynamicResource SukiLowText}"
                                       Text="{markup:I18n {x:Static helper:LangKeys.OcrHitTest}}" />
                            <StackPanel Orientation="Horizontal" Spacing="15" VerticalAlignment="Center">
                                <Border CornerRadius="5" Background="DodgerBlue" Padding="8 5">
                                    <TextBlock FontSize="11"
                                               FontWeight="Bold"
                                               Foreground="White"
                                               Text="{markup:I18n {x:Static helper:LangKeys.MatchRoi}}" />
                                </Border>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ReadFromClipboard}}"
                                        Command="{Binding PasteOcrMatchRectCommand}">
                                    <Path Data="{StaticResource ImportImageGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.DeleteRoi}}"
                                        Command="{Binding ClearOcrMatchRectCommand}">
                                    <Path Data="{StaticResource TrashGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="IndianRed" />
                                </Button>
                            </StackPanel>
                            <Grid ColumnDefinitions="Auto,3*,Auto,3*"
                                  RowDefinitions="Auto,Auto">
                                <TextBlock Text="X:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0" />
                                <TextBox Text="{Binding OcrMatchRoiX, Mode=TwoWay}" Grid.Row="0" Grid.Column="1" />
                                <TextBlock Text="Y:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="2" />
                                <TextBox Text="{Binding OcrMatchRoiY, Mode=TwoWay}" Grid.Row="0" Grid.Column="3" />
                                <TextBlock Text="W:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="0" />
                                <TextBox Text="{Binding OcrMatchRoiW, Mode=TwoWay}" Grid.Row="1" Grid.Column="1" />
                                <TextBlock Text="H:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="2" />
                                <TextBox Text="{Binding OcrMatchRoiH, Mode=TwoWay}" Grid.Row="1" Grid.Column="3" />
                            </Grid>
                            <TextBlock FontSize="11"
                                       Foreground="{DynamicResource SukiLowText}"
                                       Text="{markup:I18n {x:Static helper:LangKeys.TargetText}}" />
                            <TextBox Text="{Binding OcrMatchTargetText, Mode=TwoWay}" />
                            <TextBlock FontSize="11"
                                       Foreground="{DynamicResource SukiLowText}"
                                       Text="{markup:I18n {x:Static helper:LangKeys.RecognitionThreshold}}" />
                            <TextBox Text="{Binding OcrMatchThreshold, Mode=TwoWay}" />
                            <DockPanel>
                                <ToggleSwitch Classes="Switch"
                                              DockPanel.Dock="Right"
                                              IsChecked="{Binding OcrMatchOnlyRec, Mode=TwoWay}" />
                                <TextBlock FontSize="12"
                                           FontWeight="SemiBold" VerticalAlignment="Center"
                                           Text="{markup:I18n {x:Static helper:LangKeys.OnlyRec}}" />
                            </DockPanel>
                            <Button Classes="Flat ActionButton"
                                    Command="{Binding RunOcrHitTestCommand}"
                                    IsEnabled="{calcBinding:Binding '!IsRunning'}">
                                <TextBlock Text="{markup:I18n {x:Static helper:LangKeys.Execute}}" />
                            </Button>
                        </StackPanel>
                        <StackPanel IsVisible="{Binding IsScreenshotTestPanelVisible}"
                                    Spacing="8">
                            <TextBlock FontSize="12"
                                       FontWeight="Bold"
                                       Foreground="{DynamicResource SukiLowText}"
                                       Text="{markup:I18n {x:Static helper:LangKeys.TemplateHitTest}}" />
                            <StackPanel Orientation="Horizontal" Spacing="15" VerticalAlignment="Center">
                                <Border CornerRadius="5" Background="DodgerBlue" Padding="8 5">
                                    <TextBlock FontSize="11"
                                               FontWeight="Bold"
                                               Foreground="White"
                                               Text="{markup:I18n {x:Static helper:LangKeys.MatchRoi}}" />
                                </Border>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ReadFromClipboard}}"
                                        Command="{Binding PasteTemplateMatchRectCommand}">
                                    <Path Data="{StaticResource ImportImageGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.DeleteRoi}}"
                                        Command="{Binding ClearTemplateMatchRectCommand}">
                                    <Path Data="{StaticResource TrashGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="IndianRed" />
                                </Button>
                            </StackPanel>
                            <Grid ColumnDefinitions="Auto,3*,Auto,3*"
                                  RowDefinitions="Auto,Auto">
                                <TextBlock Text="X:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0" />
                                <TextBox Text="{Binding TemplateMatchRoiX, Mode=TwoWay}" Grid.Row="0" Grid.Column="1" />
                                <TextBlock Text="Y:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="2" />
                                <TextBox Text="{Binding TemplateMatchRoiY, Mode=TwoWay}" Grid.Row="0" Grid.Column="3" />
                                <TextBlock Text="W:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="0" />
                                <TextBox Text="{Binding TemplateMatchRoiW, Mode=TwoWay}" Grid.Row="1" Grid.Column="1" />
                                <TextBlock Text="H:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="2" />
                                <TextBox Text="{Binding TemplateMatchRoiH, Mode=TwoWay}" Grid.Row="1" Grid.Column="3" />
                            </Grid>
                            <Button Classes="Flat ActionButton"
                                    Command="{Binding SelectTemplateImageCommand}">
                                <StackPanel Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
                                    <TextBlock VerticalAlignment="Center"
                                               Text="{markup:I18n {x:Static helper:LangKeys.TemplateSelect}}" />
                                    <Image Width="32" Height="32"
                                           IsVisible="{calcBinding:Binding 'TemplateMatchImage != null'}"
                                           Source="{Binding TemplateMatchImage}" />
                                </StackPanel>
                            </Button>
                            <TextBlock FontSize="11"
                                       Foreground="{DynamicResource SukiLowText}" VerticalAlignment="Center"
                                       Text="{markup:I18n {x:Static helper:LangKeys.RecognitionThreshold}}" />
                            <TextBox Text="{Binding TemplateMatchThreshold, Mode=TwoWay}" />
                            <DockPanel>
                                <ToggleSwitch Classes="Switch"
                                              DockPanel.Dock="Right"
                                              IsChecked="{Binding TemplateMatchGreenMask, Mode=TwoWay}" />
                                <TextBlock FontSize="12"
                                           FontWeight="SemiBold" VerticalAlignment="Center"
                                           Text="{markup:I18n {x:Static helper:LangKeys.GreenMask}}" />
                            </DockPanel>
                            <TextBlock FontSize="11"
                                       Foreground="{DynamicResource SukiLowText}"
                                       Text="{markup:I18n {x:Static helper:LangKeys.TemplateMethod}}" />
                            <ComboBox ItemsSource="{Binding TemplateMatchMethodOptions}"
                                      SelectedItem="{Binding TemplateMatchMethod, Mode=TwoWay}" />
                            <Button Classes="Flat ActionButton"
                                    Command="{Binding RunTemplateMatchTestCommand}"
                                    IsEnabled="{calcBinding:Binding '!IsRunning'}">
                                <TextBlock Text="{markup:I18n {x:Static helper:LangKeys.Execute}}" />
                            </Button>
                        </StackPanel>

                        <StackPanel IsVisible="{Binding IsColorTestPanelVisible}"
                                    Spacing="8">
                            <TextBlock FontSize="12"
                                       FontWeight="Bold"
                                       Foreground="{DynamicResource SukiLowText}"
                                       Text="{markup:I18n {x:Static helper:LangKeys.ColorHitTest}}" />
                            <TextBlock FontSize="11"
                                       Foreground="{DynamicResource SukiLowText}"
                                       Text="{markup:I18n {x:Static helper:LangKeys.ColorMatchMethod}}" />
                            <ComboBox ItemsSource="{Binding ColorMethods}"
                                      SelectedValueBinding="{Binding Other}" DisplayMemberBinding="{Binding Name}"
                                      SelectedValue="{Binding ColorMatchMethod, Mode=TwoWay}" />
                            <TextBlock FontSize="11"
                                       Foreground="{DynamicResource SukiLowText}"
                                       Text="{markup:I18n {x:Static helper:LangKeys.ColorMatchCount}}" />
                            <TextBox Text="{Binding ColorMatchCount, Mode=TwoWay}" />
                            <DockPanel>
                                <ToggleSwitch Classes="Switch"
                                              DockPanel.Dock="Right"
                                              IsChecked="{Binding ColorMatchConnected, Mode=TwoWay}" />
                                <TextBlock FontSize="12"
                                           FontWeight="SemiBold"
                                           VerticalAlignment="Center"
                                           Text="{markup:I18n {x:Static helper:LangKeys.ColorMatchConnected}}" />
                            </DockPanel>

                            <StackPanel Orientation="Horizontal" Spacing="15" VerticalAlignment="Center">
                                <Border CornerRadius="5" Background="DodgerBlue" Padding="8 5">
                                    <TextBlock FontSize="11"
                                               FontWeight="Bold"
                                               Foreground="White"
                                               Text="{markup:I18n {x:Static helper:LangKeys.MatchRoi}}" />
                                </Border>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ReadFromClipboard}}"
                                        Command="{Binding PasteColorMatchRectCommand}">
                                    <Path Data="{StaticResource ImportImageGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.DeleteRoi}}"
                                        Command="{Binding ClearColorMatchRectCommand}">
                                    <Path Data="{StaticResource TrashGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="IndianRed" />
                                </Button>
                            </StackPanel>
                            <Grid ColumnDefinitions="Auto,3*,Auto,3*"
                                  RowDefinitions="Auto,Auto">
                                <TextBlock Text="X:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0" />
                                <TextBox Text="{Binding ColorMatchRoiX, Mode=TwoWay}" Grid.Row="0" Grid.Column="1" />
                                <TextBlock Text="Y:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="2" />
                                <TextBox Text="{Binding ColorMatchRoiY, Mode=TwoWay}" Grid.Row="0" Grid.Column="3" />
                                <TextBlock Text="W:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="0" />
                                <TextBox Text="{Binding ColorMatchRoiW, Mode=TwoWay}" Grid.Row="1" Grid.Column="1" />
                                <TextBlock Text="H:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="2" />
                                <TextBox Text="{Binding ColorMatchRoiH, Mode=TwoWay}" Grid.Row="1" Grid.Column="3" />
                            </Grid>
                            <Button Classes="Flat ActionButton" ex:BubbleExtensions.EnableBubble="True"
                                    ex:BubbleExtensions.BubbleContent="{markup:I18n {x:Static helper:LangKeys.CopiedToClipboard}}"
                                    Command="{Binding CopyColorMatchPairsCommand}">
                                <TextBlock Text="总复制" />
                            </Button>

                            <StackPanel IsVisible="{calcBinding:Binding 'ColorMode == 0'}"
                                        Spacing="6">
                                <StackPanel Orientation="Horizontal" Spacing="10" VerticalAlignment="Center">
                                    <Border CornerRadius="5" Background="DodgerBlue" Padding="8 5"
                                            HorizontalAlignment="Left">
                                        <TextBlock FontSize="11" FontWeight="Bold" Foreground="White" Text="RGB Upper" />
                                    </Border>
                                    <Button Classes="BasicTight ActionButton"
                                            ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ButtonAdd}}"
                                            Command="{Binding AddRgbUpperRowCommand}">
                                        <Path Data="{StaticResource AddGeometry}"
                                              Width="14"
                                              Height="14"
                                              Stretch="Uniform"
                                              Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                    </Button>
                                </StackPanel>
                                <ItemsControl ItemsSource="{Binding RgbUpperRows}">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <StackPanel Spacing="6" />
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate x:DataType="other:TripletRow">
                                            <Grid ColumnDefinitions="Auto,3*,Auto,3*,Auto,3*,Auto,Auto,Auto"
                                                  ColumnSpacing="6">
                                                <TextBlock Grid.Column="0" Text="R:" VerticalAlignment="Center" />
                                                <TextBox Grid.Column="1" Text="{Binding First, Mode=TwoWay}" />
                                                <TextBlock Grid.Column="2" Text="G:" VerticalAlignment="Center" />
                                                <TextBox Grid.Column="3" Text="{Binding Second, Mode=TwoWay}" />
                                                <TextBlock Grid.Column="4" Text="B:" VerticalAlignment="Center" />
                                                <TextBox Grid.Column="5" Text="{Binding Third, Mode=TwoWay}" />
                                                <Button Grid.Column="6"
                                                        Classes="BasicTight ActionButton"
                                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ReadFromClipboard}}"
                                                        Command="{Binding PasteRgbUpperRowCommand, Source={x:Static helper:Instances.ToolsViewModel}}"
                                                        CommandParameter="{Binding}">
                                                    <Path Data="{StaticResource ImportImageGeometry}"
                                                          Width="14"
                                                          Height="14"
                                                          Stretch="Uniform"
                                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                                </Button>
                                                <Button Grid.Column="7"
                                                        Classes="BasicTight ActionButton"
                                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ButtonClear}}"
                                                        Command="{Binding ClearRgbUpperRowCommand, Source={x:Static helper:Instances.ToolsViewModel}}"
                                                        CommandParameter="{Binding}">
                                                    <Path Data="{StaticResource TrashGeometry}"
                                                          Width="14"
                                                          Height="14"
                                                          Stretch="Uniform"
                                                          Fill="IndianRed" />
                                                </Button>
                                                <Button Grid.Column="8" Height="50"
                                                        Classes="BasicTight ActionButton"
                                                        VerticalAlignment="Center"
                                                        VerticalContentAlignment="Center"
                                                        HorizontalContentAlignment="Center"
                                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.Delete}}"
                                                        Command="{Binding RemoveRgbUpperRowCommand, Source={x:Static helper:Instances.ToolsViewModel}}"
                                                        CommandParameter="{Binding}">
                                                    <Path Data="{StaticResource SubGeometry}"
                                                          Width="14" VerticalAlignment="Center"

                                                          Stretch="Uniform"
                                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                                </Button>
                                            </Grid>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>

                                <StackPanel Orientation="Horizontal" Spacing="10" VerticalAlignment="Center">
                                    <Border CornerRadius="5" Background="Orange" Padding="8 5"
                                            HorizontalAlignment="Left">
                                        <TextBlock FontSize="11" FontWeight="Bold" Foreground="White" Text="RGB Lower" />
                                    </Border>
                                    <Button Classes="BasicTight ActionButton"
                                            ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ButtonAdd}}"
                                            Command="{Binding AddRgbLowerRowCommand}">
                                        <Path Data="{StaticResource AddGeometry}"
                                              Width="14"
                                              Height="14"
                                              Stretch="Uniform"
                                              Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                    </Button>
                                </StackPanel>
                                <ItemsControl ItemsSource="{Binding RgbLowerRows}">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <StackPanel Spacing="6" />
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate x:DataType="other:TripletRow">
                                            <Grid ColumnDefinitions="Auto,3*,Auto,3*,Auto,3*,Auto,Auto,Auto"
                                                  ColumnSpacing="6">
                                                <TextBlock Grid.Column="0" Text="R:" VerticalAlignment="Center" />
                                                <TextBox Grid.Column="1" Text="{Binding First, Mode=TwoWay}" />
                                                <TextBlock Grid.Column="2" Text="G:" VerticalAlignment="Center" />
                                                <TextBox Grid.Column="3" Text="{Binding Second, Mode=TwoWay}" />
                                                <TextBlock Grid.Column="4" Text="B:" VerticalAlignment="Center" />
                                                <TextBox Grid.Column="5" Text="{Binding Third, Mode=TwoWay}" />
                                                <Button Grid.Column="6"
                                                        Classes="BasicTight ActionButton"
                                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ReadFromClipboard}}"
                                                        Command="{Binding PasteRgbLowerRowCommand, Source={x:Static helper:Instances.ToolsViewModel}}"
                                                        CommandParameter="{Binding}">
                                                    <Path Data="{StaticResource ImportImageGeometry}"
                                                          Width="14"
                                                          Height="14"
                                                          Stretch="Uniform"
                                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                                </Button>
                                                <Button Grid.Column="7"
                                                        Classes="BasicTight ActionButton"
                                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ButtonClear}}"
                                                        Command="{Binding ClearRgbLowerRowCommand, Source={x:Static helper:Instances.ToolsViewModel}}"
                                                        CommandParameter="{Binding}">
                                                    <Path Data="{StaticResource TrashGeometry}"
                                                          Width="14"
                                                          Height="14"
                                                          Stretch="Uniform"
                                                          Fill="IndianRed" />
                                                </Button>
                                                <Button Grid.Column="8" Height="50"
                                                        Classes="BasicTight ActionButton"
                                                        VerticalAlignment="Center"
                                                        VerticalContentAlignment="Center"
                                                        HorizontalContentAlignment="Center"
                                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.Delete}}"
                                                        Command="{Binding RemoveRgbLowerRowCommand, Source={x:Static helper:Instances.ToolsViewModel}}"
                                                        CommandParameter="{Binding}">
                                                    <Path Data="{StaticResource SubGeometry}"
                                                          Width="14" VerticalAlignment="Center"

                                                          Stretch="Uniform"
                                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                                </Button>
                                            </Grid>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </StackPanel>

                            <StackPanel IsVisible="{calcBinding:Binding 'ColorMode == 1'}"
                                        Spacing="6">
                                <StackPanel Orientation="Horizontal" Spacing="10" VerticalAlignment="Center">
                                    <Border CornerRadius="5" Background="DodgerBlue" Padding="8 5"
                                            HorizontalAlignment="Left">
                                        <TextBlock FontSize="11" FontWeight="Bold" Foreground="White" Text="HSV Upper" />
                                    </Border>
                                    <Button Classes="BasicTight ActionButton"
                                            ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ButtonAdd}}"
                                            Command="{Binding AddHsvUpperRowCommand}">
                                        <Path Data="{StaticResource AddGeometry}"
                                              Width="14"
                                              Height="14"
                                              Stretch="Uniform"
                                              Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                    </Button>
                                </StackPanel>
                                <ItemsControl ItemsSource="{Binding HsvUpperRows}">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <StackPanel Spacing="6" />
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate x:DataType="other:TripletRow">
                                            <Grid ColumnDefinitions="Auto,3*,Auto,3*,Auto,3*,Auto,Auto,Auto"
                                                  ColumnSpacing="6">
                                                <TextBlock Grid.Column="0" Text="H:" VerticalAlignment="Center" />
                                                <TextBox Grid.Column="1" Text="{Binding First, Mode=TwoWay}" />
                                                <TextBlock Grid.Column="2" Text="S:" VerticalAlignment="Center" />
                                                <TextBox Grid.Column="3" Text="{Binding Second, Mode=TwoWay}" />
                                                <TextBlock Grid.Column="4" Text="V:" VerticalAlignment="Center" />
                                                <TextBox Grid.Column="5" Text="{Binding Third, Mode=TwoWay}" />
                                                <Button Grid.Column="6"
                                                        Classes="BasicTight ActionButton"
                                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ReadFromClipboard}}"
                                                        Command="{Binding PasteHsvUpperRowCommand, Source={x:Static helper:Instances.ToolsViewModel}}"
                                                        CommandParameter="{Binding}">
                                                    <Path Data="{StaticResource ImportImageGeometry}"
                                                          Width="14"
                                                          Height="14"
                                                          Stretch="Uniform"
                                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                                </Button>
                                                <Button Grid.Column="7"
                                                        Classes="BasicTight ActionButton"
                                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ButtonClear}}"
                                                        Command="{Binding ClearHsvUpperRowCommand, Source={x:Static helper:Instances.ToolsViewModel}}"
                                                        CommandParameter="{Binding}">
                                                    <Path Data="{StaticResource TrashGeometry}"
                                                          Width="14"
                                                          Height="14"
                                                          Stretch="Uniform"
                                                          Fill="IndianRed" />
                                                </Button>
                                                <Button Grid.Column="8" Height="50"
                                                        Classes="BasicTight ActionButton"
                                                        VerticalAlignment="Center"
                                                        VerticalContentAlignment="Center"
                                                        HorizontalContentAlignment="Center"
                                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.Delete}}"
                                                        Command="{Binding RemoveHsvUpperRowCommand, Source={x:Static helper:Instances.ToolsViewModel}}"
                                                        CommandParameter="{Binding}">
                                                    <Path Data="{StaticResource SubGeometry}"
                                                          Width="14" VerticalAlignment="Center"

                                                          Stretch="Uniform"
                                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                                </Button>
                                            </Grid>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>

                                <StackPanel Orientation="Horizontal" Spacing="10" VerticalAlignment="Center">
                                    <Border CornerRadius="5" Background="Orange" Padding="8 5"
                                            HorizontalAlignment="Left">
                                        <TextBlock FontSize="11" FontWeight="Bold" Foreground="White" Text="HSV Lower" />
                                    </Border>
                                    <Button Classes="BasicTight ActionButton"
                                            ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ButtonAdd}}"
                                            Command="{Binding AddHsvLowerRowCommand}">
                                        <Path Data="{StaticResource AddGeometry}"
                                              Width="14"
                                              Height="14"
                                              Stretch="Uniform"
                                              Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                    </Button>
                                </StackPanel>
                                <ItemsControl ItemsSource="{Binding HsvLowerRows}">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <StackPanel Spacing="6" />
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate x:DataType="other:TripletRow">
                                            <Grid ColumnDefinitions="Auto,3*,Auto,3*,Auto,3*,Auto,Auto,Auto"
                                                  ColumnSpacing="6">
                                                <TextBlock Grid.Column="0" Text="H:" VerticalAlignment="Center" />
                                                <TextBox Grid.Column="1" Text="{Binding First, Mode=TwoWay}" />
                                                <TextBlock Grid.Column="2" Text="S:" VerticalAlignment="Center" />
                                                <TextBox Grid.Column="3" Text="{Binding Second, Mode=TwoWay}" />
                                                <TextBlock Grid.Column="4" Text="V:" VerticalAlignment="Center" />
                                                <TextBox Grid.Column="5" Text="{Binding Third, Mode=TwoWay}" />
                                                <Button Grid.Column="6"
                                                        Classes="BasicTight ActionButton"
                                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ReadFromClipboard}}"
                                                        Command="{Binding PasteHsvLowerRowCommand, Source={x:Static helper:Instances.ToolsViewModel}}"
                                                        CommandParameter="{Binding}">
                                                    <Path Data="{StaticResource ImportImageGeometry}"
                                                          Width="14"
                                                          Height="14"
                                                          Stretch="Uniform"
                                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                                </Button>
                                                <Button Grid.Column="7"
                                                        Classes="BasicTight ActionButton"
                                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ButtonClear}}"
                                                        Command="{Binding ClearHsvLowerRowCommand, Source={x:Static helper:Instances.ToolsViewModel}}"
                                                        CommandParameter="{Binding}">
                                                    <Path Data="{StaticResource TrashGeometry}"
                                                          Width="14"
                                                          Height="14"
                                                          Stretch="Uniform"
                                                          Fill="IndianRed" />
                                                </Button>
                                                <Button Grid.Column="8" Height="50"
                                                        Classes="BasicTight ActionButton"
                                                        VerticalAlignment="Center"
                                                        VerticalContentAlignment="Center"
                                                        HorizontalContentAlignment="Center"
                                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.Delete}}"
                                                        Command="{Binding RemoveHsvLowerRowCommand, Source={x:Static helper:Instances.ToolsViewModel}}"
                                                        CommandParameter="{Binding}">
                                                    <Path Data="{StaticResource SubGeometry}"
                                                          Width="14" VerticalAlignment="Center"

                                                          Stretch="Uniform"
                                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                                </Button>
                                            </Grid>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </StackPanel>

                            <StackPanel IsVisible="{calcBinding:Binding 'ColorMode == 2'}"
                                        Spacing="6">
                                <StackPanel Orientation="Horizontal" Spacing="10" VerticalAlignment="Center">
                                    <Border CornerRadius="5" Background="DodgerBlue" Padding="8 5"
                                            HorizontalAlignment="Left">
                                        <TextBlock FontSize="11" FontWeight="Bold" Foreground="White" Text="Gray Upper" />
                                    </Border>
                                    <Button Classes="BasicTight ActionButton"
                                            ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ButtonAdd}}"
                                            Command="{Binding AddGrayUpperRowCommand}">
                                        <Path Data="{StaticResource AddGeometry}"
                                              Width="14"
                                              Height="14"
                                              Stretch="Uniform"
                                              Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                    </Button>
                                </StackPanel>
                                <ItemsControl ItemsSource="{Binding GrayUpperRows}">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <StackPanel Spacing="6" />
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate x:DataType="other:SingleRow">
                                            <Grid ColumnDefinitions="Auto,3*,Auto,Auto,Auto"
                                                  ColumnSpacing="6">
                                                <TextBlock Grid.Column="0" Text="G:" VerticalAlignment="Center" />
                                                <TextBox Grid.Column="1" Text="{Binding Value, Mode=TwoWay}" />
                                                <Button Grid.Column="2"
                                                        Classes="BasicTight ActionButton"
                                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ReadFromClipboard}}"
                                                        Command="{Binding PasteGrayUpperRowCommand, Source={x:Static helper:Instances.ToolsViewModel}}"
                                                        CommandParameter="{Binding}">
                                                    <Path Data="{StaticResource ImportImageGeometry}"
                                                          Width="14"
                                                          Height="14"
                                                          Stretch="Uniform"
                                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                                </Button>
                                                <Button Grid.Column="3"
                                                        Classes="BasicTight ActionButton"
                                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ButtonClear}}"
                                                        Command="{Binding ClearGrayUpperRowCommand, Source={x:Static helper:Instances.ToolsViewModel}}"
                                                        CommandParameter="{Binding}">
                                                    <Path Data="{StaticResource TrashGeometry}"
                                                          Width="14"
                                                          Height="14"
                                                          Stretch="Uniform"
                                                          Fill="IndianRed" />
                                                </Button>
                                                <Button Grid.Column="4" Height="50"
                                                        Classes="BasicTight ActionButton"
                                                        VerticalAlignment="Center"
                                                        VerticalContentAlignment="Center"
                                                        HorizontalContentAlignment="Center"
                                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.Delete}}"
                                                        Command="{Binding RemoveGrayUpperRowCommand, Source={x:Static helper:Instances.ToolsViewModel}}"
                                                        CommandParameter="{Binding}">
                                                    <Path Data="{StaticResource SubGeometry}"
                                                          Width="14" VerticalAlignment="Center"

                                                          Stretch="Uniform"
                                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                                </Button>
                                            </Grid>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>

                                <StackPanel Orientation="Horizontal" Spacing="10" VerticalAlignment="Center">
                                    <Border CornerRadius="5" Background="Orange" Padding="8 5"
                                            HorizontalAlignment="Left">
                                        <TextBlock FontSize="11" FontWeight="Bold" Foreground="White" Text="Gray Lower" />
                                    </Border>
                                    <Button Classes="BasicTight ActionButton"
                                            ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ButtonAdd}}"
                                            Command="{Binding AddGrayLowerRowCommand}">
                                        <Path Data="{StaticResource AddGeometry}"
                                              Width="14"
                                              Height="14"
                                              Stretch="Uniform"
                                              Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                    </Button>
                                </StackPanel>
                                <ItemsControl ItemsSource="{Binding GrayLowerRows}">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <StackPanel Spacing="6" />
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate x:DataType="other:SingleRow">
                                            <Grid ColumnDefinitions="Auto,3*,Auto,Auto,Auto"
                                                  ColumnSpacing="6">
                                                <TextBlock Grid.Column="0" Text="G:" VerticalAlignment="Center" />
                                                <TextBox Grid.Column="1" Text="{Binding Value, Mode=TwoWay}" />
                                                <Button Grid.Column="2"
                                                        Classes="BasicTight ActionButton"
                                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ReadFromClipboard}}"
                                                        Command="{Binding PasteGrayLowerRowCommand, Source={x:Static helper:Instances.ToolsViewModel}}"
                                                        CommandParameter="{Binding}">
                                                    <Path Data="{StaticResource ImportImageGeometry}"
                                                          Width="14"
                                                          Height="14"
                                                          Stretch="Uniform"
                                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                                </Button>
                                                <Button Grid.Column="3"
                                                        Classes="BasicTight ActionButton"
                                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ButtonClear}}"
                                                        Command="{Binding ClearGrayLowerRowCommand, Source={x:Static helper:Instances.ToolsViewModel}}"
                                                        CommandParameter="{Binding}">
                                                    <Path Data="{StaticResource TrashGeometry}"
                                                          Width="14"
                                                          Height="14"
                                                          Stretch="Uniform"
                                                          Fill="IndianRed" />
                                                </Button>
                                                <Button Grid.Column="4" Height="50"
                                                        Classes="BasicTight ActionButton"
                                                        VerticalAlignment="Center"
                                                        VerticalContentAlignment="Center"
                                                        HorizontalContentAlignment="Center"
                                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.Delete}}"
                                                        Command="{Binding RemoveGrayLowerRowCommand, Source={x:Static helper:Instances.ToolsViewModel}}"
                                                        CommandParameter="{Binding}">
                                                    <Path Data="{StaticResource SubGeometry}"
                                                          Width="14" VerticalAlignment="Center"

                                                          Stretch="Uniform"
                                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                                </Button>
                                            </Grid>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
                                <Button Classes="Flat ActionButton"
                                        IsVisible="{Binding !IsColorPreviewActive}"
                                        Command="{Binding ToggleColorPreviewCommand}">
                                    <TextBlock Text="{markup:I18n {x:Static helper:LangKeys.LiveViewPreview}}" />
                                </Button>
                                <Button Classes="Flat ActionButton"
                                        IsVisible="{Binding IsColorPreviewActive}"
                                        Command="{Binding ToggleColorPreviewCommand}">
                                    <TextBlock Text="{markup:I18n {x:Static helper:LangKeys.LiveViewRestore}}" />
                                </Button>
                                <ColorPicker Color="{Binding ColorPreviewFillColor, Mode=TwoWay}"
                                             ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ColorPickerTitle}}" />
                            </StackPanel>
                            <Button Classes="Flat ActionButton"
                                    Command="{Binding RunColorMatchTestCommand}"
                                    IsEnabled="{calcBinding:Binding '!IsRunning'}">
                                <TextBlock Text="{markup:I18n {x:Static helper:LangKeys.Execute}}" />
                            </Button>
                        </StackPanel>

                        <StackPanel IsVisible="{Binding IsClickTestPanelVisible}"
                                    Spacing="8">
                            <TextBlock FontSize="12"
                                       FontWeight="Bold"
                                       Foreground="{DynamicResource SukiLowText}"
                                       Text="{markup:I18n {x:Static helper:LangKeys.ClickHitTest}}" />
                            <StackPanel Orientation="Horizontal" Spacing="15" VerticalAlignment="Center">
                                <Border CornerRadius="5" Background="DodgerBlue" Padding="8 5">
                                    <TextBlock FontSize="11"
                                               FontWeight="Bold"
                                               Foreground="White"
                                               Text="{markup:I18n {x:Static helper:LangKeys.TargetTitle}}" />
                                </Border>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ReadFromClipboard}}"
                                        Command="{Binding PasteClickTestTargetCommand}">
                                    <Path Data="{StaticResource ImportImageGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.DeleteTarget}}"
                                        Command="{Binding ClearClickTestTargetCommand}">
                                    <Path Data="{StaticResource TrashGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="IndianRed" />
                                </Button>
                            </StackPanel>
                            <Grid ColumnDefinitions="Auto,3*,Auto,3*"
                                  RowDefinitions="Auto,Auto">
                                <TextBlock Text="X:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0" />
                                <TextBox Text="{Binding ClickTestTargetX, Mode=TwoWay}" Grid.Row="0" Grid.Column="1" />
                                <TextBlock Text="Y:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="2" />
                                <TextBox Text="{Binding ClickTestTargetY, Mode=TwoWay}" Grid.Row="0" Grid.Column="3" />
                                <TextBlock Text="W:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="0" />
                                <TextBox Text="{Binding ClickTestTargetW, Mode=TwoWay}" Grid.Row="1" Grid.Column="1" />
                                <TextBlock Text="H:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="2" />
                                <TextBox Text="{Binding ClickTestTargetH, Mode=TwoWay}" Grid.Row="1" Grid.Column="3" />
                            </Grid>
                            <StackPanel Orientation="Horizontal" Spacing="15" VerticalAlignment="Center">
                                <Border CornerRadius="5" Background="LimeGreen" Padding="8 5">
                                    <TextBlock FontSize="11"
                                               FontWeight="Bold"
                                               Foreground="White"
                                               Text="{markup:I18n {x:Static helper:LangKeys.OffsetTitle}}" />
                                </Border>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ReadFromClipboard}}"
                                        Command="{Binding PasteClickTestOffsetCommand}">
                                    <Path Data="{StaticResource ImportImageGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.DeleteRoi}}"
                                        Command="{Binding ClearClickTestOffsetCommand}">
                                    <Path Data="{StaticResource TrashGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="IndianRed" />
                                </Button>
                            </StackPanel>
                            <Grid ColumnDefinitions="Auto,3*,Auto,3*"
                                  RowDefinitions="Auto,Auto">
                                <TextBlock Text="ΔX:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0" />
                                <TextBox Text="{Binding ClickTestOffsetX, Mode=TwoWay}" Grid.Row="0" Grid.Column="1" />
                                <TextBlock Text="ΔY:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="2" />
                                <TextBox Text="{Binding ClickTestOffsetY, Mode=TwoWay}" Grid.Row="0" Grid.Column="3" />
                                <TextBlock Text="ΔW:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="0" />
                                <TextBox Text="{Binding ClickTestOffsetW, Mode=TwoWay}" Grid.Row="1" Grid.Column="1" />
                                <TextBlock Text="ΔH:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="2" />
                                <TextBox Text="{Binding ClickTestOffsetH, Mode=TwoWay}" Grid.Row="1" Grid.Column="3" />
                            </Grid>
                            <Button Classes="Flat ActionButton"
                                    Command="{Binding RunClickHitTestCommand}"
                                    IsEnabled="{calcBinding:Binding '!IsRunning'}">
                                <TextBlock Text="{markup:I18n {x:Static helper:LangKeys.Execute}}" />
                            </Button>
                        </StackPanel>

                        <StackPanel IsVisible="{Binding IsSwipeTestPanelVisible}"
                                    Spacing="8">
                            <TextBlock FontSize="12"
                                       FontWeight="Bold"
                                       Foreground="{DynamicResource SukiLowText}"
                                       Text="{markup:I18n {x:Static helper:LangKeys.SwipeHitTest}}" />
                            <StackPanel Orientation="Horizontal" Spacing="15" VerticalAlignment="Center">
                                <Border CornerRadius="5" Background="DodgerBlue" Padding="8 5">
                                    <TextBlock FontSize="11"
                                               FontWeight="Bold"
                                               Foreground="White"
                                               Text="{markup:I18n {x:Static helper:LangKeys.LiveViewSwipeStart}}" />
                                </Border>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ReadFromClipboard}}"
                                        Command="{Binding PasteSwipeTestStartCommand}">
                                    <Path Data="{StaticResource ImportImageGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.DeleteRoi}}"
                                        Command="{Binding ClearSwipeTestStartCommand}">
                                    <Path Data="{StaticResource TrashGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="IndianRed" />
                                </Button>
                            </StackPanel>
                            <Grid ColumnDefinitions="Auto,3*,Auto,3*">
                                <TextBlock Text="X:" VerticalAlignment="Center" Grid.Column="0" />
                                <TextBox Text="{Binding SwipeTestStartX, Mode=TwoWay}" Grid.Column="1" />
                                <TextBlock Text="Y:" VerticalAlignment="Center" Grid.Column="2" />
                                <TextBox Text="{Binding SwipeTestStartY, Mode=TwoWay}" Grid.Column="3" />
                            </Grid>
                            <StackPanel Orientation="Horizontal" Spacing="15" VerticalAlignment="Center">
                                <Border CornerRadius="5" Background="Orange" Padding="8 5">
                                    <TextBlock FontSize="11"
                                               FontWeight="Bold"
                                               Foreground="White"
                                               Text="{markup:I18n {x:Static helper:LangKeys.LiveViewSwipeEnd}}" />
                                </Border>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ButtonAdd}}"
                                        Command="{Binding AddSwipeTestEndRowCommand}">
                                    <Path Data="{StaticResource AddGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                            </StackPanel>
                            <ItemsControl ItemsSource="{Binding SwipeTestEndRows}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <StackPanel Spacing="6" />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate x:DataType="other:PairRow">
                                        <Grid ColumnDefinitions="Auto,3*,Auto,3*,Auto,Auto,Auto"
                                              ColumnSpacing="6">
                                            <TextBlock Grid.Column="0" Text="X:" VerticalAlignment="Center" />
                                            <TextBox Grid.Column="1" Text="{Binding First, Mode=TwoWay}" />
                                            <TextBlock Grid.Column="2" Text="Y:" VerticalAlignment="Center" />
                                            <TextBox Grid.Column="3" Text="{Binding Second, Mode=TwoWay}" />
                                            <Button Grid.Column="4"
                                                    Classes="BasicTight ActionButton"
                                                    ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ReadFromClipboard}}"
                                                    Command="{Binding PasteSwipeTestEndRowCommand, Source={x:Static helper:Instances.ToolsViewModel}}"
                                                    CommandParameter="{Binding}">
                                                <Path Data="{StaticResource ImportImageGeometry}"
                                                      Width="14"
                                                      Height="14"
                                                      Stretch="Uniform"
                                                      Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                            </Button>
                                            <Button Grid.Column="5"
                                                    Classes="BasicTight ActionButton"
                                                    ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ButtonClear}}"
                                                    Command="{Binding ClearSwipeTestEndRowCommand, Source={x:Static helper:Instances.ToolsViewModel}}"
                                                    CommandParameter="{Binding}">
                                                <Path Data="{StaticResource TrashGeometry}"
                                                      Width="14"
                                                      Height="14"
                                                      Stretch="Uniform"
                                                      Fill="IndianRed" />
                                            </Button>
                                            <Button Grid.Column="6" Height="50"
                                                    Classes="BasicTight ActionButton"
                                                    ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.Delete}}"
                                                    Command="{Binding RemoveSwipeTestEndRowCommand, Source={x:Static helper:Instances.ToolsViewModel}}"
                                                    CommandParameter="{Binding}">
                                                <Path Data="{StaticResource SubGeometry}"
                                                      Width="14"
                                                      VerticalAlignment="Center"
                                                      Stretch="Uniform"
                                                      Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                            </Button>
                                        </Grid>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                            <StackPanel Orientation="Horizontal" Spacing="15" VerticalAlignment="Center">
                                <Border CornerRadius="5" Background="LimeGreen" Padding="8 5">
                                    <TextBlock FontSize="11"
                                               FontWeight="Bold"
                                               Foreground="White"
                                               Text="{markup:I18n {x:Static helper:LangKeys.LiveViewSwipeDuration}}" />
                                </Border>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ReadFromClipboard}}"
                                        Command="{Binding PasteSwipeTestDurationCommand}">
                                    <Path Data="{StaticResource ImportImageGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.DeleteRoi}}"
                                        Command="{Binding ClearSwipeTestDurationCommand}">
                                    <Path Data="{StaticResource TrashGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="IndianRed" />
                                </Button>
                            </StackPanel>
                            <TextBox Text="{Binding SwipeTestDuration, Mode=TwoWay}" />
                            <Button Classes="Flat ActionButton"
                                    Command="{Binding RunSwipeHitTestCommand}"
                                    IsEnabled="{calcBinding:Binding '!IsRunning'}">
                                <TextBlock Text="{markup:I18n {x:Static helper:LangKeys.Execute}}" />
                            </Button>
                        </StackPanel>

                        <StackPanel IsVisible="{Binding IsKeyTestPanelVisible}"
                                    Spacing="8">
                            <TextBlock FontSize="12"
                                       FontWeight="Bold"
                                       Foreground="{DynamicResource SukiLowText}"
                                       Text="{markup:I18n {x:Static helper:LangKeys.KeyHitTest}}" />
                            <Button Classes="Flat ActionButton"
                                    Command="{Binding RunKeyHitTestCommand}"
                                    IsEnabled="{calcBinding:Binding '!IsRunning'}">
                                <TextBlock Text="{markup:I18n {x:Static helper:LangKeys.Execute}}" />
                            </Button>
                        </StackPanel>

                        <StackPanel IsVisible="{Binding IsNeuralNetworkDetectTestPanelVisible}"
                                    Spacing="8">
                            <TextBlock FontSize="12"
                                       FontWeight="Bold"
                                       Foreground="{DynamicResource SukiLowText}"
                                       Text="{markup:I18n {x:Static helper:LangKeys.NeuralNetworkDetectHitTest}}" />
                            <TextBlock FontSize="11"
                                       Foreground="{DynamicResource SukiLowText}"
                                       Text="{markup:I18n {x:Static helper:LangKeys.ModelPath}}" />
                            <Grid ColumnDefinitions="*,Auto">
                                <TextBox Grid.Column="0" MinWidth="120" ex:DragDropExtensions.EnableFileDragDrop="True"
                                         Text="{Binding NeuralNetworkDetectModelPath, Mode=TwoWay}" />
                                <Button Grid.Column="1"
                                        Classes="BasicTight ActionButton"
                                        Command="{Binding SelectModelPathCommand}">
                                    <TextBlock Text="{markup:I18n {x:Static helper:LangKeys.Select}}" />
                                </Button>
                            </Grid>

                            <StackPanel Orientation="Horizontal" Spacing="15" VerticalAlignment="Center">
                                <Border CornerRadius="5" Background="DodgerBlue" Padding="8 5">
                                    <TextBlock FontSize="11"
                                               FontWeight="Bold"
                                               Foreground="White"
                                               Text="{markup:I18n {x:Static helper:LangKeys.MatchRoi}}" />
                                </Border>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.ReadFromClipboard}}"
                                        Command="{Binding PasteNeuralNetworkDetectRectCommand}">
                                    <Path Data="{StaticResource ImportImageGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.DeleteRoi}}"
                                        Command="{Binding ClearNeuralNetworkDetectCommand}">
                                    <Path Data="{StaticResource TrashGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="IndianRed" />
                                </Button>
                            </StackPanel>
                            <Grid ColumnDefinitions="Auto,3*,Auto,3*"
                                  RowDefinitions="Auto,Auto">
                                <TextBlock Text="X:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0" />
                                <TextBox Text="{Binding NeuralNetworkDetectRoiX, Mode=TwoWay}" Grid.Row="0"
                                         Grid.Column="1" />
                                <TextBlock Text="Y:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="2" />
                                <TextBox Text="{Binding NeuralNetworkDetectRoiY, Mode=TwoWay}" Grid.Row="0"
                                         Grid.Column="3" />
                                <TextBlock Text="W:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="0" />
                                <TextBox Text="{Binding NeuralNetworkDetectRoiW, Mode=TwoWay}" Grid.Row="1"
                                         Grid.Column="1" />
                                <TextBlock Text="H:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="2" />
                                <TextBox Text="{Binding NeuralNetworkDetectRoiH, Mode=TwoWay}" Grid.Row="1"
                                         Grid.Column="3" />
                            </Grid>

                            <StackPanel Orientation="Horizontal" Spacing="15" VerticalAlignment="Center">
                                <Border CornerRadius="5" Background="Orange" Padding="8 5">
                                    <TextBlock FontSize="11"
                                               FontWeight="Bold"
                                               Foreground="White"
                                               Text="{markup:I18n {x:Static helper:LangKeys.LiveViewNeuralNetworkDetectExpandedRoi}}" />
                                </Border>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.CopyToClipboard}}"
                                        ex:BubbleExtensions.EnableBubble="True"
                                        ex:BubbleExtensions.BubbleContent="{markup:I18n {x:Static helper:LangKeys.CopiedToClipboard}}"
                                        Command="{Binding CopyNeuralNetworkDetectExpandedRectCommand}">
                                    <Path Data="{StaticResource CopyGeometry}"
                                          Width="14"
                                          Height="14"
                                          Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                                <Button Classes="BasicTight ActionButton"
                                        ToolTip.Tip="{markup:I18n {x:Static helper:LangKeys.TooltipAddToMatch}}"
                                        Command="{Binding ApplyNeuralNetworkDetectExpandedRoiToMatchCommand}"
                                        IsVisible="{Binding IsNeuralNetworkDetectTestPanelVisible}">
                                    <avalonia:FluentIcon Height="18" Icon="ArrowExport" IconSize="Size16"
                                                         IconVariant="Regular" />
                                </Button>
                            </StackPanel>
                            <Grid ColumnDefinitions="Auto,3*,Auto,3*"
                                  RowDefinitions="Auto,Auto">
                                <TextBlock Text="X:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0" />
                                <TextBox Text="{Binding NeuralNetworkDetectExpandedX}" IsReadOnly="True" Grid.Row="0"
                                         Grid.Column="1" />
                                <TextBlock Text="Y:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="2" />
                                <TextBox Text="{Binding NeuralNetworkDetectExpandedY}" IsReadOnly="True" Grid.Row="0"
                                         Grid.Column="3" />
                                <TextBlock Text="W:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="0" />
                                <TextBox Text="{Binding NeuralNetworkDetectExpandedW}" IsReadOnly="True" Grid.Row="1"
                                         Grid.Column="1" />
                                <TextBlock Text="H:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="2" />
                                <TextBox Text="{Binding NeuralNetworkDetectExpandedH}" IsReadOnly="True" Grid.Row="1"
                                         Grid.Column="3" />
                            </Grid>
                            <StackPanel Orientation="Horizontal" Spacing="15" VerticalAlignment="Center">
                                <Border CornerRadius="5" Background="OrangeRed" Padding="8 5">
                                    <TextBlock FontSize="11" FontWeight="Bold"
                                               Foreground="White"
                                               Text="{markup:I18n {x:Static helper:LangKeys.ClassifyLabel}}" />
                                </Border>
                                <Button Classes="BasicTight ActionButton" HorizontalAlignment="Right"
                                        Command="{Binding AddClassifyLabelRowCommand}">
                                    <Path Data="{StaticResource AddGeometry}" Width="14" Height="14" Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                            </StackPanel>
                            <ItemsControl ItemsSource="{Binding ClassifyLabelRows}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <StackPanel Spacing="6" />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate x:DataType="other:SingleRow">
                                        <Grid ColumnDefinitions="*,Auto,Auto,Auto" ColumnSpacing="6">
                                            <TextBox Grid.Column="0" Text="{Binding Value, Mode=TwoWay}" />
                                            <Button Grid.Column="1" Classes="BasicTight ActionButton"
                                                    Command="{Binding PasteClassifyLabelRowCommand, Source={x:Static helper:Instances.ToolsViewModel}}"
                                                    CommandParameter="{Binding}">
                                                <Path Data="{StaticResource ImportImageGeometry}" Width="14"
                                                      Height="14" Stretch="Uniform"
                                                      Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                            </Button>
                                            <Button Grid.Column="2" Classes="BasicTight ActionButton"
                                                    Command="{Binding ClearClassifyLabelRowCommand, Source={x:Static helper:Instances.ToolsViewModel}}"
                                                    CommandParameter="{Binding}">
                                                <Path Data="{StaticResource TrashGeometry}" Width="14" Height="14"
                                                      Stretch="Uniform" Fill="IndianRed" />
                                            </Button>
                                            <Button Grid.Column="3" Classes="BasicTight ActionButton" Height="30"
                                                    VerticalAlignment="Center"
                                                    Command="{Binding RemoveClassifyLabelRowCommand, Source={x:Static helper:Instances.ToolsViewModel}}"
                                                    CommandParameter="{Binding}">
                                                <Path Data="{StaticResource SubGeometry}" Width="14" Stretch="Uniform"
                                                      Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                            </Button>
                                        </Grid>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>

                            <StackPanel Orientation="Horizontal" Spacing="15" VerticalAlignment="Center">
                                <Border CornerRadius="5" Background="HotPink" Padding="8 5">
                                    <TextBlock FontSize="11" FontWeight="Bold"
                                               Foreground="White"
                                               Text="{markup:I18n {x:Static helper:LangKeys.Expected}}" />
                                </Border>
                                <Button Classes="BasicTight ActionButton" HorizontalAlignment="Right"
                                        Command="{Binding AddExpectedRowCommand}">
                                    <Path Data="{StaticResource AddGeometry}" Width="14" Height="14" Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                            </StackPanel>
                            <ItemsControl ItemsSource="{Binding ExpectedRows}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <StackPanel Spacing="6" />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate x:DataType="other:SingleRow">
                                        <Grid ColumnDefinitions="*,Auto,Auto,Auto" ColumnSpacing="6">
                                            <TextBox Grid.Column="0" Text="{Binding Value, Mode=TwoWay}" />
                                            <Button Grid.Column="1" Classes="BasicTight ActionButton"
                                                    Command="{Binding PasteExpectedRowCommand, Source={x:Static helper:Instances.ToolsViewModel}}"
                                                    CommandParameter="{Binding}">
                                                <Path Data="{StaticResource ImportImageGeometry}" Width="14"
                                                      Height="14" Stretch="Uniform"
                                                      Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                            </Button>
                                            <Button Grid.Column="2" Classes="BasicTight ActionButton"
                                                    Command="{Binding ClearExpectedRowCommand, Source={x:Static helper:Instances.ToolsViewModel}}"
                                                    CommandParameter="{Binding}">
                                                <Path Data="{StaticResource TrashGeometry}" Width="14" Height="14"
                                                      Stretch="Uniform" Fill="IndianRed" />
                                            </Button>
                                            <Button Grid.Column="3" Classes="BasicTight ActionButton" Height="30"
                                                    VerticalAlignment="Center"
                                                    Command="{Binding RemoveExpectedRowCommand, Source={x:Static helper:Instances.ToolsViewModel}}"
                                                    CommandParameter="{Binding}">
                                                <Path Data="{StaticResource SubGeometry}" Width="14" Stretch="Uniform"
                                                      Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                            </Button>
                                        </Grid>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                          
                            <StackPanel Orientation="Horizontal" Spacing="15" VerticalAlignment="Center">
                                <Border CornerRadius="5" Background="MediumPurple" Padding="8 5">
                                    <TextBlock FontSize="11" FontWeight="Bold"
                                               Foreground="White"
                                               Text="{markup:I18n {x:Static helper:LangKeys.ConfidenceThreshold}}" />
                                </Border>
                                <Button Classes="BasicTight ActionButton" HorizontalAlignment="Right"
                                        Command="{Binding AddThresholdRowCommand}">
                                    <Path Data="{StaticResource AddGeometry}" Width="14" Height="14" Stretch="Uniform"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                </Button>
                            </StackPanel>

                            <ItemsControl ItemsSource="{Binding ThresholdRows}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <StackPanel Spacing="6" />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate x:DataType="other:SingleRow">
                                        <Grid ColumnDefinitions="*,Auto,Auto,Auto" ColumnSpacing="6">
                                            <TextBox Grid.Column="0" Text="{Binding Value, Mode=TwoWay}" />
                                            <Button Grid.Column="1" Classes="BasicTight ActionButton"
                                                    Command="{Binding PasteThresholdRowCommand, Source={x:Static helper:Instances.ToolsViewModel}}"
                                                    CommandParameter="{Binding}">
                                                <Path Data="{StaticResource ImportImageGeometry}" Width="14"
                                                      Height="14" Stretch="Uniform"
                                                      Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                            </Button>
                                            <Button Grid.Column="2" Classes="BasicTight ActionButton"
                                                    Command="{Binding ClearThresholdRowCommand, Source={x:Static helper:Instances.ToolsViewModel}}"
                                                    CommandParameter="{Binding}">
                                                <Path Data="{StaticResource TrashGeometry}" Width="14" Height="14"
                                                      Stretch="Uniform" Fill="IndianRed" />
                                            </Button>
                                            <Button Grid.Column="3" Classes="BasicTight ActionButton" Height="30"
                                                    VerticalAlignment="Center"
                                                    Command="{Binding RemoveThresholdRowCommand, Source={x:Static helper:Instances.ToolsViewModel}}"
                                                    CommandParameter="{Binding}">
                                                <Path Data="{StaticResource SubGeometry}" Width="14" Stretch="Uniform"
                                                      Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" />
                                            </Button>
                                        </Grid>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                     
                            <Border CornerRadius="5" Background="CadetBlue" Padding="8 5" HorizontalAlignment="Left">
                                <TextBlock FontSize="11" FontWeight="Bold"
                                           Foreground="White"
                                           Text="{markup:I18n {x:Static helper:LangKeys.Index}}" />
                            </Border>
                         
                            <NumericUpDown Value="{Binding NeuralNetworkDetectIndex}" Minimum="-100" Maximum="100"
                                           Increment="1" />

                            <Border CornerRadius="5" Background="Sienna" Padding="8 5" HorizontalAlignment="Left">
                                <TextBlock FontSize="11" FontWeight="Bold"
                                           Foreground="White"
                                           Text="{markup:I18n {x:Static helper:LangKeys.OrderBy}}" />
                            </Border>
                            <ComboBox ItemsSource="{Binding OrderByOptions}"
                                      SelectedItem="{Binding NeuralNetworkDetectOrderBy, Mode=TwoWay}" />

                            <Button Classes="Flat ActionButton"
                                    Command="{Binding RunNeuralNetworkDetectTestCommand}"
                                    IsEnabled="{calcBinding:Binding '!IsRunning'}">
                                <TextBlock Text="{markup:I18n {x:Static helper:LangKeys.Execute}}" />
                            </Button>
                        </StackPanel>

                    </StackPanel>
                </ScrollViewer>
            </suki:GlassCard>
        </Grid>
    </Grid>
</UserControl>